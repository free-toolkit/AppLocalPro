<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="GastroNeo: app de restaurante del futuro con reservas inteligentes, men√∫ digital, sistema de fidelizaci√≥n GastroPass, gesti√≥n para camareros y protocolos laborales cu√°nticos.">
    <title>GastroNeo ‚Äì Restaurante del Futuro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FF2A6D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GastroNeo">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" href="icon-192.png">
    <style>
        /* === Estilos base === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #1A0A10;
            color: #FFD6E0;
            overflow-x: hidden;
            font-family: 'Rajdhani', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .app-container {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: #220F18;
            border: 1px solid #FF2A6D;
            box-shadow: 0 0 30px rgba(255, 42, 109, 0.4);
            position: relative;
            flex: 1;
        }
        .app-header {
            background: linear-gradient(135deg, #FF2A6D, #FFD300);
            padding: 1.2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        .app-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 10px rgba(255,255,255,0.7);
        }
        .app-content {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: rgba(34, 15, 24, 0.7);
            /* üîë CORRECCI√ìN CLAVE PARA M√ìVILES */
            min-height: 0;
            -webkit-overflow-scrolling: touch;
        }
        .view { 
            display: none; 
            flex: 1;
            flex-direction: column;
            min-height: 0;
        }
        .view.active { 
            display: flex !important;
        }
        /* === Splash Screen === */
        #splashScreen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #1A0A10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            color: white;
            overflow: hidden;
        }
        .splash-logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #FF2A6D, #FFD300);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 30px rgba(255, 42, 109, 0.6);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .splash-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            color: #00F0FF;
            text-shadow: 0 0 10px rgba(0, 240, 255, 0.7);
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* === Botones universales === */
        .btn-neo {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-family: 'Rajdhani', sans-serif;
            cursor: pointer;
            margin: 0.8rem 0;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .btn-primary { background: linear-gradient(135deg, #FF2A6D, #D10047); color: white; }
        .btn-gold { background: linear-gradient(135deg, #FFD300, #FF9A00); color: #333; }
        .btn-verify { background: linear-gradient(135deg, #00F0FF, #6E00FF); color: #0D0916; }
        .btn-success { background: linear-gradient(135deg, #00D100, #009900); color: white; }
        .btn-scan { background: linear-gradient(135deg, #00F0FF, #0099FF); color: #0D0916; }
        .btn-warning { background: linear-gradient(135deg, #FFD300, #FF9A00); color: #220F18; }
        .btn-danger { background: linear-gradient(135deg, #FF2A6D, #D10047); color: white; }
        .form-control {
            width: 100%;
            padding: 0.8rem;
            background: #1A1030;
            color: #FFD6E0;
            border: 1px solid #FF2A6D;
            border-radius: 8px;
            font-family: 'Rajdhani', sans-serif;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #D0B0C0;
        }
        /* === Navegaci√≥n inferior === */
        .app-nav {
            display: flex;
            justify-content: space-around;
            background: rgba(10, 7, 10, 0.9);
            border-top: 1px solid #FF2A6D;
            padding: 0.8rem 0;
            backdrop-filter: blur(5px);
            flex-shrink: 0;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #E0C0D0;
            text-decoration: none;
            font-size: 0.8rem;
            font-family: 'Rajdhani', sans-serif;
            transition: color 0.3s ease;
            position: relative;
        }
        .nav-item.active, .nav-item:hover {
            color: #FFD300;
        }
        .nav-item i { font-size: 1.4rem; margin-bottom: 0.3rem; }
        /* === Bot√≥n de descarga === */
        .download-btn {
            position: fixed;
            bottom: 70px;
            right: 10px;
            background: linear-gradient(135deg, #FF2A6D, #D10047);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 0 15px rgba(255, 42, 109, 0.5);
            z-index: 1000;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .download-btn:hover {
            transform: scale(1.1);
        }
        /* === Men√∫ Digital ‚Äì Tarjetas Optimizadas === */
        .menu-category {
            margin-bottom: 1.5rem;
        }
        .menu-category-title {
            font-family: 'Orbitron', sans-serif;
            color: #FF2A6D;
            font-size: 1.25rem;
            margin: 1.2rem 0 0.9rem;
            padding-bottom: 0.4rem;
            border-bottom: 1px solid #FF2A6D;
        }
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        .menu-card {
            background: rgba(25, 10, 15, 0.65);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #3A1525;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            height: auto;
        }
        .menu-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 42, 109, 0.25);
        }
        .menu-card-img {
            height: 120px;
            overflow: hidden;
            position: relative;
        }
        .menu-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        .menu-card:hover .menu-card-img img {
            transform: scale(1.05);
        }
        .menu-card-body {
            padding: 0.8rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .menu-card-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            color: #FFD300;
            margin: 0 0 0.4rem;
            line-height: 1.2;
        }
        .menu-card-desc {
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.85rem;
            color: #F0D0E0;
            margin: 0 0 0.8rem;
            line-height: 1.4;
            flex: 1;
        }
        .menu-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        .menu-card-price {
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            color: #FF2A6D;
            font-size: 1rem;
        }
        .menu-card-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF2A6D, #D10047);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }
        .menu-card-btn:hover {
            transform: scale(1.1);
        }
        /* === Carrito de Compras === */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            background: rgba(30, 10, 15, 0.6);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border: 1px solid #3A1525;
        }
        .cart-item-info {
            flex: 1;
        }
        .cart-item-name {
            font-weight: 600;
            color: #FFD300;
            font-size: 0.95rem;
        }
        .cart-item-price {
            color: #FF2A6D;
            font-size: 0.9rem;
        }
        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .quantity-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #FF2A6D;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .cart-total {
            background: linear-gradient(135deg, #2A1018, #3A1525);
            padding: 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            text-align: center;
            border: 1px solid #FF2A6D;
        }
        .cart-total-amount {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: #FFD300;
            margin: 0.5rem 0;
        }
        /* === Protocolos Laborales === */
        .protocol-card {
            background: rgba(30, 10, 15, 0.6);
            border-left: 4px solid #FF2A6D;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        .protocol-title {
            font-family: 'Orbitron';
            color: #FFD300;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        .protocol-desc {
            font-size: 0.9rem;
            color: #D0B0C0;
        }
        .penalty-badge {
            display: inline-block;
            background: #FF2A6D;
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }
        /* === NOTIFICACIONES INTELIGENTES === */
        .notification-container {
            position: fixed;
            top: 80px;
            right: 10px;
            z-index: 1000;
            max-width: 300px;
        }
        .notification {
            background: #1A0A10;
            border-left: 4px solid;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: slideInRight 0.3s ease;
        }
        .notification.warning { border-color: #FFD300; }
        .notification.danger { border-color: #FF2A6D; }
        .notification.success { border-color: #00F0FF; }
        .notification.info { border-color: #6E00FF; }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        /* === SISTEMA DE GAMIFICACI√ìN LABORAL === */
        .leaderboard {
            background: rgba(20, 5, 10, 0.8);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid #FF2A6D;
        }
        .leaderboard-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: #FFD300;
            text-align: center;
            margin-bottom: 1rem;
        }
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }
        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            margin-right: 1rem;
        }
        .rank-diamante { background: linear-gradient(135deg, #00FFFF, #0080FF); }
        .rank-oro { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .rank-plata { background: linear-gradient(135deg, #E5E4E2, #A8A8A8); }
        .rank-bronce { background: linear-gradient(135deg, #CD7F32, #8B4513); }
        .rank-risk { background: linear-gradient(135deg, #FF4444, #8B0000); color: white; }
        /* === ESTADOS VAC√çOS === */
        .empty-state {
            text-align: center;
            padding: 2rem 1rem;
            color: #D0B0C0;
        }
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #FF2A6D;
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen">
        <div class="splash-logo">
            <i class="fas fa-utensils"></i>
        </div>
        <div class="splash-text">GASTRONEO</div>
    </div>

    <!-- Notificaciones -->
    <div class="notification-container" id="notificationContainer"></div>

    <div class="app-container">
        <!-- Home View -->
        <div id="homeView" class="view active">
            <div class="app-header">
                <h1>GASTRONEO</h1>
            </div>
            <div class="app-content">
                <div style="text-align:center;margin-bottom:1.5rem;">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTGwjDuHhDnYwyI7QyXJn0e1rPwH3aWt6PkRw&s" 
                         alt="Equipo GastroNeo"
                         style="width:100%;max-height:180px;object-fit:cover;border-radius:12px;">
                    <div style="font-family:'Rajdhani';font-size:1rem;color:#FFD300;text-align:center;margin:1rem 0;font-style:italic;">
                        "M√°s del 70% de los clientes eligen restaurantes con equipo visible y cercano."
                    </div>
                </div>
                <div id="authOrProfile"></div>
                <button class="btn-neo btn-primary" onclick="showView('bookingView')">
                    <i class="fas fa-utensils"></i> Reservar Mesa
                </button>
                <button class="btn-neo btn-scan" onclick="showView('qrScannerView')">
                    <i class="fas fa-qrcode"></i> Escanear Mesa
                </button>
                <button class="btn-neo btn-gold" onclick="showView('menuView')">
                    <i class="fas fa-book-open"></i> Men√∫ Digital
                </button>
                <button class="btn-neo btn-primary" onclick="showView('rewardsView')">
                    <i class="fas fa-coins"></i> Mi GastroPass
                </button>
                <button class="btn-neo" style="background:rgba(255,42,109,0.2);color:#FF2A6D;border:1px solid #FF2A6D;" onclick="openOwnerAccess()">
                    <i class="fas fa-user-lock"></i> Acceso Due√±o
                </button>
                <button class="btn-neo" style="background:rgba(0,240,255,0.2);color:#00F0FF;border:1px solid #00F0FF;" onclick="showView('waiterLoginView')">
                    <i class="fas fa-user-tie"></i> Camarero
                </button>
            </div>
        </div>

        <!-- === Vistas principales (booking, menu, cart, etc.) === -->
        <!-- QR Scanner View -->
        <div id="qrScannerView" class="view">
            <div class="app-header">
                <h1>üì± Escanear QR Mesa</h1>
            </div>
            <div class="app-content" style="text-align: center;">
                <div style="margin: 2rem 0;">
                    <i class="fas fa-qrcode" style="font-size: 4rem; color: #00F0FF; margin-bottom: 1rem;"></i>
                    <div style="font-family: 'Rajdhani'; font-size: 1.1rem; color: #FFD300; margin-bottom: 1.5rem;">
                        Escanea el c√≥digo QR de tu mesa
                    </div>
                </div>
                <div class="scanner-container" style="background:rgba(0,240,255,0.1);border:2px dashed #00F0FF;border-radius:12px;padding:2rem;margin:1.5rem 0;">
                    <div class="scanner-icon" style="color:#00F0FF;font-size:5rem;margin-bottom:1rem;">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div style="color:#D0B0C0;margin-bottom:1.5rem;">C√°mara lista para escanear...</div>
                    <button class="btn-neo btn-scan" onclick="simulateQRScan()">
                        <i class="fas fa-camera"></i> Simular Escaneo
                    </button>
                </div>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- Booking View -->
        <div id="bookingView" class="view">
            <div class="app-header">
                <h1>üçΩÔ∏è Reservar Mesa</h1>
            </div>
            <div class="app-content">
                <div class="form-group">
                    <label>Nombre Completo</label>
                    <input type="text" id="clientName" class="form-control" placeholder="Ej. Carlos Ruiz">
                </div>
                <div class="form-group">
                    <label>Tel√©fono</label>
                    <input type="tel" id="clientPhone" class="form-control" placeholder="+34 600 000 000">
                </div>
                <div class="form-group">
                    <label>Fecha</label>
                    <input type="date" id="bookingDate" class="form-control">
                </div>
                <div class="form-group">
                    <label>Hora</label>
                    <select id="bookingTime" class="form-control">
                        <option value="13:00">13:00</option>
                        <option value="13:30">13:30</option>
                        <option value="14:00">14:00</option>
                        <option value="20:00">20:00</option>
                        <option value="20:30">20:30</option>
                        <option value="21:00">21:00</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Comensales</label>
                    <select id="guests" class="form-control">
                        <option>1</option><option>2</option><option>3</option><option>4</option>
                    </select>
                </div>
                <button class="btn-neo btn-primary" onclick="confirmBooking()">Confirmar Reserva</button>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- Men√∫ Digital -->
        <div id="menuView" class="view">
            <div class="app-header">
                <h1>üìñ Men√∫ Digital</h1>
            </div>
            <div class="app-content">
                <div id="mesaInfo" style="background: rgba(0, 240, 255, 0.1); border-radius: 8px; padding: 0.8rem; margin-bottom: 1rem; display: none;">
                    <div style="color: #00F0FF; font-family: 'Orbitron'; font-size: 0.9rem;">
                        <i class="fas fa-table"></i> Mesa: <span id="currentMesa">-</span>
                    </div>
                </div>
                <div class="menu-category">
                    <h2 class="menu-category-title">ENTRADAS</h2>
                    <div class="menu-grid">
                        <div class="menu-card">
                            <div class="menu-card-img">
                                <img src="https://images.pexels.com/photos/3764643/pexels-photo-3764643.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Tartar de At√∫n" onerror="this.src='https://via.placeholder.com/300x120/2A1018/FF2A6D?text=Imagen+No+Disponible'">
                            </div>
                            <div class="menu-card-body">
                                <h3 class="menu-card-name">Tartar de At√∫n</h3>
                                <p class="menu-card-desc">At√∫n fresco con wasabi y aguacate</p>
                                <div class="menu-card-footer">
                                    <span class="menu-card-price">‚Ç¨16.50</span>
                                    <button class="menu-card-btn" onclick="addToCart('Tartar de At√∫n', 16.50)">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1.5rem;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- Carrito -->
        <div id="cartView" class="view">
            <div class="app-header">
                <h1>üõí Mi Carrito</h1>
            </div>
            <div class="app-content">
                <div id="cartItemsContainer"></div>
                <div id="emptyCart" class="empty-state" style="display: none;">
                    <i class="fas fa-shopping-cart"></i>
                    <h3>Tu carrito est√° vac√≠o</h3>
                </div>
                <div id="cartSummary" style="display: none;">
                    <div class="cart-total">
                        <div>Total del Pedido</div>
                        <div class="cart-total-amount" id="cartTotalAmount">‚Ç¨0.00</div>
                    </div>
                </div>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;" onclick="showView('menuView')">‚Üê Seguir Comprando</button>
            </div>
        </div>

        <!-- Mi GastroPass -->
        <div id="rewardsView" class="view">
            <div class="app-header">
                <h1>ü™ô Mi GastroPass</h1>
            </div>
            <div class="app-content">
                <div class="gastropass-card" style="text-align:center;background:linear-gradient(135deg,#2A1018,#3A1525);border:1px solid #FF2A6D;border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;">
                    <div class="level-badge" style="font-family:'Orbitron';font-size:1.3rem;color:#FFD300;margin-bottom:0.5rem;">ü•â Bronce</div>
                    <div style="font-size:0.9rem;color:#D0B0C0;margin-bottom:0.8rem;">Progreso hacia Plata</div>
                    <div class="progress-bar" style="background:rgba(0,0,0,0.3);height:12px;border-radius:10px;overflow:hidden;margin:0 0.5rem;">
                        <div class="progress-fill" style="height:100%;background:linear-gradient(90deg,#FF2A6D,#FFD300);width:56%;"></div>
                    </div>
                    <div style="font-size:0.85rem;color:#F0D0E0;margin-top:0.5rem;">280 / 500 pts</div>
                </div>
                <div class="benefits-section" style="background:rgba(30,10,15,0.6);border-radius:12px;padding:1.2rem;margin-bottom:1.5rem;">
                    <h3 style="font-family:'Rajdhani';color:#FFD300;margin-bottom:1rem;">üéÅ Tus Beneficios</h3>
                    <div style="font-size:0.95rem;line-height:1.6;color:#FFD6E0;">
                        <div>‚Ä¢ Men√∫ digital exclusivo</div>
                        <div>‚Ä¢ Cumplea√±os gratis</div>
                    </div>
                </div>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1.5rem;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- Panel Due√±o -->
        <div id="ownerDashboard" class="view">
            <div class="app-header">
                <h1>üîê Panel Quantum</h1>
            </div>
            <div class="app-content">
                <div class="summary-card" style="background:rgba(30,10,15,0.5);border:1px solid #FF2A6D;border-radius:12px;padding:1rem;margin-bottom:1.5rem;">
                    <div style="font-family:'Orbitron';color:#FFD300;font-size:1.1rem;margin-bottom:0.8rem;">üìä Resumen del D√≠a</div>
                    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:0.6rem;font-size:0.9rem;">
                        <div><strong>Ingresos:</strong> <span id="dailyRevenue">‚Ç¨0</span></div>
                        <div><strong>Mesas ocupadas:</strong> <span id="occupiedTables">0/12</span></div>
                    </div>
                </div>

                <!-- üî• NUEVO: Protocolos Laborales y Sistema de Castigo -->
                <div class="protocol-card">
                    <div class="protocol-title">üõ°Ô∏è Protocolo Quantum Laboral v2.1</div>
                    <div class="protocol-desc">
                        Cada empleado comienza con 100 puntos de conducta.
                        Infracciones reducen puntos. Si cae bajo 30, se activa "Alerta Roja".
                        Si llega a 0, despido autom√°tico.
                        <span class="penalty-badge">-10 pts</span> por retraso.
                        <span class="penalty-badge">-25 pts</span> por queja de cliente.
                        <span class="penalty-badge">+15 pts</span> por elogio.
                    </div>
                </div>

                <!-- Leaderboard con riesgo -->
                <div class="leaderboard">
                    <div class="leaderboard-title">üèÜ Ranking Empleados (Conducta)</div>
                    <div id="ownerLeaderboard"></div>
                </div>

                <button class="btn-neo btn-danger" onclick="logoutOwner()">Cerrar Sesi√≥n</button>
            </div>
        </div>

        <!-- Login Camarero -->
        <div id="waiterLoginView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-user-tie"></i> Camarero</h1>
            </div>
            <div class="app-content" style="text-align:center;">
                <input type="password" id="waiterPin" class="form-control" placeholder="****" style="max-width:200px;margin:0 auto;">
                <button class="btn-neo btn-primary" onclick="loginWaiter()" style="margin-top:1.5rem;">Ingresar</button>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1rem;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- Mesas Camarero -->
        <div id="waiterTablesView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-concierge-bell"></i> Mesas</h1>
            </div>
            <div class="app-content">
                <div class="leaderboard">
                    <div class="leaderboard-title">‚ö° Tu Posici√≥n</div>
                    <div id="waiterLeaderboard"></div>
                </div>
                <h3 style="font-family:'Rajdhani';color:#FFD300;margin:1.5rem 0 1rem;">Gesti√≥n de Mesas</h3>
                <div id="tablesGrid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-top: 1rem;"></div>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1.5rem;" onclick="logoutWaiter()">‚Üê Cerrar Sesi√≥n</button>
            </div>
        </div>
    </div>

    <!-- Navegaci√≥n -->
    <div class="app-nav">
        <a href="#" class="nav-item active" onclick="showView('homeView'); return false;">
            <i class="fas fa-home"></i><span>Inicio</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('bookingView'); return false;">
            <i class="fas fa-calendar"></i><span>Reservas</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('menuView'); return false;">
            <i class="fas fa-book"></i><span>Men√∫</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('qrScannerView'); return false;">
            <i class="fas fa-qrcode"></i><span>Escanear</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('cartView'); return false;" id="cartNavItem">
            <i class="fas fa-shopping-cart"></i><span>Carrito</span>
            <div class="cart-badge" id="cartBadge" style="display: none;">0</div>
        </a>
    </div>

    <button class="download-btn" onclick="installApp()">
        <i class="fas fa-download"></i>
    </button>

    <script>
        // === ESTADO GLOBAL ===
        let appState = {
            user: null,
            employee: null,
            cart: JSON.parse(localStorage.getItem('gastroneo_cart')) || [],
            employees: [
                { id: 'emp_1', name: 'Carlos Rodr√≠guez', points: 850, level: 'diamante', conducta: 92 },
                { id: 'emp_2', name: 'Ana Mart√≠nez', points: 720, level: 'oro', conducta: 100 },
                { id: 'emp_3', name: 'Luis Garc√≠a', points: 450, level: 'plata', conducta: 28 }, // ‚ö†Ô∏è Riesgo
                { id: 'emp_4', name: 'Mar√≠a L√≥pez', points: 380, level: 'bronce', conducta: 75 }
            ]
        };

        // === INICIALIZACI√ìN ===
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                initializeApp();
            }, 1500);
        });

        function initializeApp() {
            loadUser();
            renderAuthOrProfile();
            updateCartBadge();
            renderEmployeeLeaderboards();
        }

        // === VISTAS ===
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            const target = document.getElementById(viewId);
            if (target) target.classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            const navMap = {homeView:0, bookingView:1, menuView:2, qrScannerView:3, cartView:4};
            const idx = navMap[viewId];
            if (idx !== undefined) {
                const items = document.querySelectorAll('.nav-item');
                if (items[idx]) items[idx].classList.add('active');
            }
            if (viewId === 'cartView') renderCart();
            if (viewId === 'ownerDashboard') renderOwnerLeaderboard();
        }

        // === CARRITO ===
        function addToCart(name, price) {
            const item = appState.cart.find(i => i.name === name);
            if (item) item.quantity++;
            else appState.cart.push({id:Date.now(), name, price, quantity:1});
            saveCart();
            updateCartBadge();
        }
        function saveCart() { localStorage.setItem('gastroneo_cart', JSON.stringify(appState.cart)); }
        function updateCartBadge() {
            const total = appState.cart.reduce((s,i) => s + i.quantity, 0);
            const badge = document.getElementById('cartBadge');
            if (badge) {
                badge.textContent = total;
                badge.style.display = total ? 'flex' : 'none';
            }
        }
        function renderCart() {
            const container = document.getElementById('cartItemsContainer');
            const empty = document.getElementById('emptyCart');
            const summary = document.getElementById('cartSummary');
            if (appState.cart.length === 0) {
                empty.style.display = 'block';
                summary.style.display = 'none';
                container.innerHTML = '';
            } else {
                empty.style.display = 'none';
                summary.style.display = 'block';
                let total = 0;
                container.innerHTML = appState.cart.map(item => {
                    const t = item.price * item.quantity;
                    total += t;
                    return `<div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">‚Ç¨${item.price} x${item.quantity}</div>
                        </div>
                    </div>`;
                }).join('');
                document.getElementById('cartTotalAmount').textContent = `‚Ç¨${total.toFixed(2)}`;
            }
        }

        // === USUARIO ===
        function loadUser() {
            const u = localStorage.getItem('gastroneo_user');
            if (u) appState.user = JSON.parse(u);
        }
        function renderAuthOrProfile() {
            const c = document.getElementById('authOrProfile');
            if (!c) return;
            if (appState.user) {
                c.innerHTML = `<div style="background:rgba(255,42,109,0.1);border-radius:12px;padding:1rem;margin-bottom:1.5rem;">
                    <div>¬°Hola, ${appState.user.name}!</div>
                </div>`;
            } else {
                c.innerHTML = `<div style="background:rgba(0,240,255,0.1);border-radius:12px;padding:1rem;margin-bottom:1.5rem;text-align:center;">
                    <button class="btn-neo btn-verify" onclick="showAuthModal()" style="padding:0.6rem 1rem;font-size:0.9rem;">
                        <i class="fas fa-user-plus"></i> Registrarse
                    </button>
                </div>`;
            }
        }
        function showAuthModal() {
            const name = prompt("Nombre:");
            if (name) {
                appState.user = {name, points:0, level:'Bronce'};
                localStorage.setItem('gastroneo_user', JSON.stringify(appState.user));
                renderAuthOrProfile();
            }
        }

        // === RESERVAS ===
        function confirmBooking() {
            alert('‚úÖ Reserva confirmada');
            showView('homeView');
        }

        // === QR ===
        function simulateQRScan() {
            localStorage.setItem('current_mesa', Math.floor(Math.random()*12)+1);
            showView('menuView');
        }

        // === DUE√ëO ===
        function openOwnerAccess() {
            if (prompt('Contrase√±a:') === 'quantum2024') {
                showView('ownerDashboard');
            } else {
                alert('‚ùå Acceso denegado');
            }
        }
        function logoutOwner() { showView('homeView'); }

        // === CAMARERO ===
        function loginWaiter() {
            const pin = document.getElementById('waiterPin').value;
            if (['1234','5678','9012','3456'].includes(pin)) {
                appState.employee = {name: 'Empleado'};
                showView('waiterTablesView');
            } else {
                alert('PIN incorrecto');
            }
        }
        function logoutWaiter() {
            appState.employee = null;
            showView('homeView');
        }
        function renderTablesGrid() {
            const grid = document.getElementById('tablesGrid');
            if (!grid) return;
            grid.innerHTML = Array.from({length:12}, (_,i) => 
                `<div class="table-card ${Math.random()>0.5?'occupied':'free'}">
                    <div class="table-number">${i+1}</div>
                    <div class="table-status">${Math.random()>0.5?'OCUPADA':'LIBRE'}</div>
                </div>`
            ).join('');
        }

        // === GAMIFICACI√ìN + SISTEMA DE CASTIGO ===
        function renderOwnerLeaderboard() {
            const container = document.getElementById('ownerLeaderboard');
            if (!container) return;
            container.innerHTML = appState.employees.map(emp => {
                const risk = emp.conducta <= 30;
                const badgeClass = risk ? 'rank-risk' : 
                    emp.level === 'diamante' ? 'rank-diamante' :
                    emp.level === 'oro' ? 'rank-oro' :
                    emp.level === 'plata' ? 'rank-plata' : 'rank-bronce';
                return `
                    <div class="leaderboard-item">
                        <div class="rank-badge ${badgeClass}">${emp.conducta}</div>
                        <div style="flex:1;">
                            <div style="font-weight:600;">${emp.name}</div>
                            <div style="font-size:0.8rem;color:#D0B0C0;">
                                Nivel: ${emp.level.toUpperCase()} ‚Ä¢ 
                                ${risk ? '‚ö†Ô∏è ALERTA ROJA' : '‚úÖ Estable'}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderWaiterLeaderboard() {
            const container = document.getElementById('waiterLeaderboard');
            if (container) container.innerHTML = '<div style="color:#FFD300;">Tu conducta: 92/100 ‚úÖ</div>';
        }

        function renderEmployeeLeaderboards() {
            renderOwnerLeaderboard();
            renderWaiterLeaderboard();
        }

        // === PWA ===
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', e => {
            e.preventDefault();
            deferredPrompt = e;
        });
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt = null;
            }
        }

        console.log('‚úÖ GastroNeo Quantum v2.1 cargado ‚Äì Sistema de castigo laboral activo');
    </script>
</body>
</html>
