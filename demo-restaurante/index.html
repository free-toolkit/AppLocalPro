<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GastroNeo: Restaurante del Futuro con IA, Gamificaci√≥n y Neo-Glassmorphism">
    <title>GastroNeo ‚Äì Revoluci√≥n Gastron√≥mica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* === VARIABLES NEO-GLASSMORPHISM === */
        :root {
            --neo-primary: #FF2A6D;
            --neo-secondary: #00F0FF;
            --neo-accent: #FFD300;
            --neo-purple: #6E00FF;
            --neo-bg: #0D0916;
            --neo-bg-light: #1A0A10;
            --neo-text: #FFD6E0;
            --neo-text-secondary: #D0B0C0;
        }

        /* === ESTILOS BASE === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: var(--neo-bg);
            color: var(--neo-text);
            overflow-x: hidden;
            font-family: 'Rajdhani', sans-serif;
            min-height: 100vh;
        }

        .app-container {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--neo-bg-light);
            position: relative;
            overflow: hidden;
        }

        /* === NEO-GLASSMORPHISM === */
        .neo-glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .neo-holographic {
            background: linear-gradient(125deg, 
                rgba(255, 42, 109, 0.1) 0%,
                rgba(0, 240, 255, 0.1) 50%,
                rgba(110, 0, 255, 0.1) 100%);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 240, 255, 0.3);
        }

        .neo-holographic::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent
            );
            animation: hologram-shine 3s infinite;
        }

        @keyframes hologram-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* === HEADER HOLOGR√ÅFICO === */
        .app-header {
            background: linear-gradient(135deg, var(--neo-primary), var(--neo-accent));
            padding: 1.2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .app-header::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.6), 
                transparent
            );
            animation: header-shine 4s infinite;
        }

        @keyframes header-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .app-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 900;
            color: white;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            letter-spacing: 2px;
        }

        /* === CONTENIDO PRINCIPAL === */
        .app-content {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: rgba(34, 15, 24, 0.7);
        }

        .view { display: none; }
        .view.active { display: block; }

        /* === SPLASH SCREEN === */
        #splashScreen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--neo-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            color: white;
            overflow: hidden;
        }

        .splash-logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--neo-primary), var(--neo-accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 50px rgba(255, 42, 109, 0.8);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .splash-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            color: var(--neo-secondary);
            text-shadow: 0 0 15px rgba(0, 240, 255, 0.8);
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* === BOTONES NEO === */
        .btn-neo {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-family: 'Rajdhani', sans-serif;
            cursor: pointer;
            margin: 0.8rem 0;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary { 
            background: linear-gradient(135deg, var(--neo-primary), #D10047); 
            color: white; 
        }

        .btn-secondary { 
            background: linear-gradient(135deg, var(--neo-secondary), #00B8FF); 
            color: var(--neo-bg); 
        }

        .btn-accent { 
            background: linear-gradient(135deg, var(--neo-accent), #FF9A00); 
            color: var(--neo-bg); 
        }

        .btn-purple { 
            background: linear-gradient(135deg, var(--neo-purple), #3A00B8); 
            color: white; 
        }

        /* === NAVEGACI√ìN === */
        .app-nav {
            display: flex;
            justify-content: space-around;
            background: rgba(10, 7, 10, 0.9);
            border-top: 1px solid var(--neo-primary);
            padding: 0.8rem 0;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--neo-text-secondary);
            text-decoration: none;
            font-size: 0.8rem;
            font-family: 'Rajdhani', sans-serif;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem;
        }

        .nav-item.active, .nav-item:hover {
            color: var(--neo-accent);
            transform: translateY(-2px);
        }

        .nav-item i { 
            font-size: 1.4rem; 
            margin-bottom: 0.3rem; 
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--neo-primary);
            color: white;
            font-size: 0.7rem;
            padding: 0.2rem 0.4rem;
            border-radius: 50%;
            min-width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* === NOTIFICACIONES === */
        .notification-container {
            position: fixed;
            top: 80px;
            right: 10px;
            z-index: 1000;
            max-width: 300px;
        }

        .notification {
            background: var(--neo-bg-light);
            border-left: 4px solid;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: slideInRight 0.3s ease;
        }

        .notification.warning { border-color: var(--neo-accent); }
        .notification.danger { border-color: var(--neo-primary); }
        .notification.success { border-color: var(--neo-secondary); }

        /* === GAMIFICACI√ìN === */
        .leaderboard {
            background: rgba(20, 5, 10, 0.8);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid var(--neo-primary);
        }

        .leaderboard-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--neo-accent);
            text-align: center;
            margin-bottom: 1rem;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }

        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            margin-right: 1rem;
        }

        .rank-diamante { background: linear-gradient(135deg, #00FFFF, #0080FF); }
        .rank-oro { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .rank-plata { background: linear-gradient(135deg, #E5E4E2, #A8A8A8); }

        /* === NUEVOS ESTILOS PARA EL MEN√ö MODERNO === */
        .quantum-portal {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle at center, 
                transparent 0%, 
                var(--neo-primary) 50%,
                var(--neo-bg) 100%);
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
            animation: portal-expand 1.5s ease-out;
        }

        @keyframes portal-expand {
            0% { transform: scale(0); opacity: 1; }
            50% { transform: scale(2); opacity: 0.8; }
            100% { transform: scale(4); opacity: 0; }
        }

        .hologram-enter {
            animation: hologram-appear 2s ease-out;
        }

        @keyframes hologram-appear {
            0% { 
                transform: translateY(100vh) rotateX(90deg);
                opacity: 0;
                filter: hue-rotate(180deg) blur(20px);
            }
            50% { 
                transform: translateY(-20px) rotateX(20deg);
                opacity: 0.8;
                filter: hue-rotate(90deg) blur(10px);
            }
            100% { 
                transform: translateY(0) rotateX(0);
                opacity: 1;
                filter: hue-rotate(0) blur(0);
            }
        }

        .menu-header {
            background: linear-gradient(135deg, 
                rgba(255, 42, 109, 0.9), 
                rgba(110, 0, 255, 0.9),
                rgba(0, 240, 255, 0.9));
            padding: 3rem 1rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .menu-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 211, 0, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 240, 255, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 42, 109, 0.2) 0%, transparent 50%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .category-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--neo-accent), var(--neo-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 211, 0, 0.5);
            margin: 2rem 0 1rem;
            position: relative;
            display: inline-block;
        }

        .category-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--neo-secondary), transparent);
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .menu-card {
            background: rgba(25, 10, 15, 0.9);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 42, 109, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            backdrop-filter: blur(10px);
            margin: 1rem;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent
            );
            transition: left 0.5s ease;
        }

        .menu-card:hover::before {
            left: 100%;
        }

        .menu-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 
                0 20px 40px rgba(255, 42, 109, 0.3),
                0 0 80px rgba(0, 240, 255, 0.2),
                inset 0 0 60px rgba(255, 211, 0, 0.1);
            border: 1px solid rgba(0, 240, 255, 0.5);
        }

        .menu-card-img {
            height: 200px;
            overflow: hidden;
            position: relative;
        }

        .menu-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .menu-card:hover .menu-card-img img {
            transform: scale(1.1);
        }

        .menu-card-body {
            padding: 1.5rem;
        }

        .menu-card-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            color: var(--neo-accent);
            margin-bottom: 0.8rem;
            line-height: 1.3;
        }

        .menu-card-desc {
            color: var(--neo-text-secondary);
            font-size: 0.95rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .ingredients-container {
            margin-bottom: 1rem;
        }

        .ingredient-tag {
            background: rgba(0,240,255,0.2);
            color: var(--neo-secondary);
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            border: 1px solid rgba(0,240,255,0.3);
            display: inline-block;
            margin: 0.2rem;
        }

        .menu-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }

        .menu-card-price {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--neo-primary);
            font-size: 1.4rem;
        }

        .add-to-cart-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--neo-primary), #D10047);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 1.2rem;
        }

        .add-to-cart-btn::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent
            );
            transform: rotate(45deg);
            transition: all 0.6s ease;
        }

        .add-to-cart-btn:hover::before {
            left: 100%;
        }

        .add-to-cart-btn:hover {
            transform: scale(1.1) rotate(180deg);
            box-shadow: 0 0 30px rgba(255, 42, 109, 0.8);
        }

        .cart-animation {
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            animation: fly-to-cart 1s cubic-bezier(0.65, 0, 0.35, 1) forwards;
        }

        @keyframes fly-to-cart {
            0% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(0.5) rotate(180deg) translateY(-50px);
                opacity: 0.8;
            }
            100% {
                transform: scale(0.1) rotate(360deg) translate(150px, 300px);
                opacity: 0;
            }
        }

        .pulse-effect {
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(0, 240, 255, 0.5); 
            }
            50% { 
                box-shadow: 0 0 40px rgba(0, 240, 255, 0.8), 0 0 60px rgba(255, 42, 109, 0.6); 
            }
        }

        .highlight-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, var(--neo-accent), #FF9A00);
            color: var(--neo-bg);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            z-index: 2;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .floating-particles {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px; height: 4px;
            background: var(--neo-secondary);
            border-radius: 50%;
            animation: float-particle 8s infinite linear;
        }

        @keyframes float-particle {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) translateX(20px); opacity: 0; }
        }

        .category-buttons {
            display: flex;
            overflow-x: auto;
            gap: 0.8rem;
            padding: 1.5rem 1rem;
            margin-bottom: 1rem;
            scrollbar-width: none;
        }

        .category-buttons::-webkit-scrollbar {
            display: none;
        }

        .category-btn {
            flex-shrink: 0;
            padding: 1rem 1.8rem;
            border: none;
            border-radius: 25px;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .category-btn.active {
            background: linear-gradient(135deg, var(--neo-primary), #D10047);
            color: white;
            box-shadow: 0 5px 20px rgba(255, 42, 109, 0.4);
        }

        .category-btn:not(.active) {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--neo-secondary);
            color: var(--neo-text);
        }

        .category-btn:not(.active):hover {
            background: rgba(0, 240, 255, 0.2);
            transform: translateY(-2px);
        }

        .back-btn {
            width: calc(100% - 2rem);
            margin: 1rem;
            padding: 1.2rem;
            background: rgba(58, 21, 37, 0.8);
            border: 1px solid var(--neo-primary);
            border-radius: 15px;
            color: #E0C0D0;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 42, 109, 0.2);
            border-color: var(--neo-accent);
            color: var(--neo-accent);
        }

        /* === FORMULARIOS === */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            background: rgba(30, 10, 15, 0.6);
            color: var(--neo-text);
            border: 1px solid var(--neo-primary);
            border-radius: 8px;
            font-family: 'Rajdhani', sans-serif;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--neo-text-secondary);
        }

        /* === CARRITO === */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            background: rgba(30, 10, 15, 0.6);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border: 1px solid rgba(255, 42, 109, 0.3);
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quantity-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--neo-primary);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .cart-total {
            background: linear-gradient(135deg, #2A1018, #3A1525);
            padding: 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            text-align: center;
            border: 1px solid var(--neo-primary);
        }

        /* === MESAS CAMAREROS === */
        .tables-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }

        .table-card {
            height: 80px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            border: 2px solid;
            transition: all 0.3s ease;
        }

        .table-free {
            background: rgba(40, 20, 30, 0.6);
            border-color: #333;
            color: #888;
        }

        .table-occupied {
            background: linear-gradient(135deg, #2A1018, #3A1525);
            border-color: var(--neo-primary);
            color: var(--neo-accent);
        }

        /* === ACTIVIDAD EN VIVO === */
        .activity-feed {
            max-height: 200px;
            overflow-y: auto;
            margin: 1rem 0;
        }

        .activity-item {
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            font-size: 0.8rem;
            border-left: 3px solid;
        }

        .activity-positive { border-color: var(--neo-secondary); }
        .activity-negative { border-color: var(--neo-primary); }

        /* === NUEVOS ESTILOS PARA LAS FUNCIONALIDADES A√ëADIDAS === */
        .progress-bar {
            height: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neo-secondary), var(--neo-primary));
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .timer-display {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--neo-accent);
            text-align: center;
            margin: 1rem 0;
        }
        
        .complaint-form {
            background: rgba(30, 10, 15, 0.7);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
            border: 1px solid rgba(255, 42, 109, 0.3);
        }
        
        .complaint-form textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .token-transfer {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .token-transfer input {
            flex: 1;
        }
        
        .token-transfer button {
            width: auto;
            padding: 0.8rem 1.2rem;
        }

        /* === NUEVOS ESTILOS PARA FUNCIONALIDADES AVANZADAS === */
        .call-options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.8rem;
            margin: 1rem 0;
        }

        .call-option {
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid;
        }

        .call-option.urgent {
            background: rgba(255, 42, 109, 0.2);
            border-color: var(--neo-primary);
        }

        .call-option.normal {
            background: rgba(0, 240, 255, 0.2);
            border-color: var(--neo-secondary);
        }

        .call-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .camera-feed {
            width: 100%;
            height: 200px;
            background: rgba(0,0,0,0.5);
            border-radius: 12px;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--neo-text-secondary);
            border: 1px solid var(--neo-secondary);
        }

        .achievement-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: linear-gradient(135deg, var(--neo-accent), #FF9A00);
            color: var(--neo-bg);
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin: 0.2rem;
        }

        .prediction-card {
            background: rgba(30, 10, 15, 0.7);
            padding: 1rem;
            border-radius: 12px;
            margin: 1rem 0;
            border: 1px solid var(--neo-secondary);
        }

        .prediction-meter {
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .prediction-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neo-secondary), var(--neo-primary));
            width: 0%;
            transition: width 1s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen">
        <div class="splash-logo">
            <i class="fas fa-utensils"></i>
        </div>
        <div class="splash-text">GASTRONEO QUANTUM</div>
    </div>

    <!-- Portal de entrada futurista -->
    <div id="quantumPortal" class="quantum-portal" style="display: none;"></div>

    <!-- Part√≠culas flotantes de fondo -->
    <div class="floating-particles" id="floatingParticles"></div>

    <!-- Sistema de Notificaciones -->
    <div class="notification-container" id="notificationContainer"></div>

    <div class="app-container">
        <!-- ========== HOME VIEW ========== -->
        <div id="homeView" class="view active">
            <div class="app-header">
                <h1>GASTRONEO QUANTUM</h1>
            </div>
            <div class="app-content">
                <div id="authOrProfile"></div>

                <button class="btn-neo btn-primary" onclick="showView('bookingView')">
                    <i class="fas fa-calendar-plus"></i> Reservar Mesa
                </button>
                <button class="btn-neo btn-secondary" onclick="showView('qrScannerView')">
                    <i class="fas fa-qrcode"></i> Escanear Mesa
                </button>
                <button class="btn-neo btn-accent" onclick="showMenuWithEffects()">
                    <i class="fas fa-book-open"></i> Men√∫ Digital
                </button>
                <button class="btn-neo btn-purple" onclick="showView('rewardsView')">
                    <i class="fas fa-coins"></i> Mi GastroPass
                </button>
                
                <!-- NUEVO: Bot√≥n para tienda local -->
                <button class="btn-neo" style="background:linear-gradient(135deg, #6E00FF, #3A00B8); color:white;" onclick="showView('localStoreView')">
                    <i class="fas fa-store"></i> Tienda Local
                </button>

                <div class="neo-glass" style="padding: 1rem; margin: 1.5rem 0;">
                    <div style="font-family: 'Orbitron'; color: var(--neo-secondary); text-align: center; margin-bottom: 0.8rem;">
                        ACCESO EMPLEADOS
                    </div>
                    <button class="btn-neo" style="background: rgba(0,240,255,0.2); color: var(--neo-secondary); border: 1px solid var(--neo-secondary);" 
                            onclick="showView('employeeLoginView')">
                        <i class="fas fa-user-tie"></i> Panel Empleados
                    </button>
                    <button class="btn-neo" style="background: rgba(255,42,109,0.2); color: var(--neo-primary); border: 1px solid var(--neo-primary);" 
                            onclick="openOwnerAccess()">
                        <i class="fas fa-user-lock"></i> Panel Quantum
                    </button>
                </div>

                <div class="activity-feed" id="liveActivityFeed"></div>
            </div>
        </div>

        <!-- ========== RESERVAS ========== -->
        <div id="bookingView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-calendar-plus"></i> Reservar Mesa</h1>
            </div>
            <div class="app-content">
                <div class="form-group">
                    <label>Nombre Completo</label>
                    <input type="text" id="clientName" class="form-control" placeholder="Ej. Carlos Ruiz">
                </div>
                <div class="form-group">
                    <label>Tel√©fono</label>
                    <input type="tel" id="clientPhone" class="form-control" placeholder="+34 600 000 000">
                </div>
                <div class="form-group">
                    <label>Fecha</label>
                    <input type="date" id="bookingDate" class="form-control">
                </div>
                <div class="form-group">
                    <label>Hora</label>
                    <select id="bookingTime" class="form-control">
                        <option value="13:00">13:00</option>
                        <option value="13:30">13:30</option>
                        <option value="14:00">14:00</option>
                        <option value="20:00">20:00</option>
                        <option value="20:30">20:30</option>
                        <option value="21:00">21:00</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Comensales</label>
                    <select id="guests" class="form-control">
                        <option>1</option><option>2</option><option>3</option><option>4</option>
                    </select>
                </div>
                <button class="btn-neo btn-primary" onclick="confirmBooking()">Confirmar Reserva</button>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- ========== ESCANER QR ========== -->
        <div id="qrScannerView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-qrcode"></i> Escanear Mesa</h1>
            </div>
            <div class="app-content" style="text-align: center;">
                <div style="margin: 2rem 0;">
                    <i class="fas fa-qrcode" style="font-size: 4rem; color: var(--neo-secondary);"></i>
                    <div style="font-family: 'Rajdhani'; font-size: 1.1rem; color: var(--neo-accent); margin: 1rem 0;">
                        Escanea el c√≥digo QR de tu mesa
                    </div>
                </div>
                
                <div class="neo-glass" style="padding: 2rem; margin: 1.5rem 0;">
                    <div class="scanner-icon">
                        <i class="fas fa-camera" style="font-size: 3rem; color: var(--neo-secondary);"></i>
                    </div>
                    <div style="color: var(--neo-text-secondary); margin: 1.5rem 0;">
                        C√°mara lista para escanear...
                    </div>
                    <button class="btn-neo btn-secondary" onclick="simulateQRScan()">
                        <i class="fas fa-camera"></i> Simular Escaneo
                    </button>
                </div>

                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- ========== MEN√ö DIGITAL MODERNO ========== -->
        <div id="menuView" class="view">
            <!-- Encabezado espectacular -->
            <div class="menu-header">
                <h1 style="font-family: 'Orbitron'; font-size: 2.5rem; color: white; text-shadow: 0 0 30px rgba(0,240,255,0.9); margin-bottom: 0.5rem;">
                    MEN√ö QUANTUM
                </h1>
                <p style="color: rgba(255,255,255,0.9); font-size: 1.2rem; font-weight: 500;">
                    Experiencia Gastron√≥mica del Futuro
                </p>
                <div style="margin-top: 1rem; font-size: 0.9rem; color: var(--neo-accent);">
                    <i class="fas fa-bolt"></i> Tecnolog√≠a Culinaria Avanzada
                </div>
            </div>

            <!-- Selector de Categor√≠as -->
            <div class="category-buttons">
                <button class="category-btn active" onclick="showCategory('entradas')">
                    üöÄ Entradas
                </button>
                <button class="category-btn" onclick="showCategory('principales')">
                    ‚ö° Principales
                </button>
                <button class="category-btn" onclick="showCategory('postres')">
                    üåå Postres
                </button>
                <button class="category-btn" onclick="showCategory('bebidas')">
                    üí´ Bebidas
                </button>
            </div>

            <!-- Contenido de las Categor√≠as -->
            <div id="menuContent">
                <!-- Las categor√≠as se cargan aqu√≠ din√°micamente -->
            </div>

            <!-- Bot√≥n de volver -->
            <button class="back-btn" onclick="showView('homeView')">
                <i class="fas fa-arrow-left"></i> Volver al Inicio
            </button>
        </div>

        <!-- ========== TIENDA LOCAL ========== -->
        <div id="localStoreView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-store"></i> Tienda Local</h1>
            </div>
            <div class="app-content">
                <div class="neo-glass" style="padding: 1rem; margin-bottom: 1.5rem;">
                    <div style="font-family: 'Orbitron'; color: var(--neo-accent); text-align: center; margin-bottom: 0.8rem;">
                        PRODUCTOS ARTESANALES
                    </div>
                    <div style="color: var(--neo-text-secondary); text-align: center; font-size: 0.9rem;">
                        Descubre los sabores aut√©nticos de nuestra regi√≥n
                    </div>
                </div>

                <div class="menu-grid">
                    <!-- Miel Artesanal -->
                    <div class="menu-card">
                        <div class="menu-card-img">
                            <img src="https://images.pexels.com/photos/547263/pexels-photo-547263.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Miel Artesanal">
                        </div>
                        <div class="menu-card-body">
                            <h3 class="menu-card-name">Miel Artesanal</h3>
                            <p style="color: var(--neo-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Miel pura de abeja recolectada en los montes locales</p>
                            <div class="menu-card-footer">
                                <span class="menu-card-price">‚Ç¨12.90</span>
                                <button class="add-to-cart-btn" onclick="addToCartWithEffect('Miel Artesanal', 12.90, this)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Queso de Cabra -->
                    <div class="menu-card">
                        <div class="menu-card-img">
                            <img src="https://images.pexels.com/photos/8213650/pexels-photo-8213650.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Queso de Cabra">
                        </div>
                        <div class="menu-card-body">
                            <h3 class="menu-card-name">Queso de Cabra</h3>
                            <p style="color: var(--neo-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Queso artesanal de cabra curado 6 meses</p>
                            <div class="menu-card-footer">
                                <span class="menu-card-price">‚Ç¨18.50</span>
                                <button class="add-to-cart-btn" onclick="addToCartWithEffect('Queso de Cabra', 18.50, this)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Aceite de Oliva Virgen Extra -->
                    <div class="menu-card">
                        <div class="menu-card-img">
                            <img src="https://images.pexels.com/photos/33783/olive-oil-salad-dressing-healthy-eating.jpg?auto=compress&cs=tinysrgb&w=600" alt="Aceite de Oliva">
                        </div>
                        <div class="menu-card-body">
                            <h3 class="menu-card-name">Aceite de Oliva Virgen Extra</h3>
                            <p style="color: var(--neo-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Primera prensada en fr√≠o, botella 500ml</p>
                            <div class="menu-card-footer">
                                <span class="menu-card-price">‚Ç¨15.75</span>
                                <button class="add-to-cart-btn" onclick="addToCartWithEffect('Aceite de Oliva Virgen Extra', 15.75, this)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Embutidos Caseros -->
                    <div class="menu-card">
                        <div class="menu-card-img">
                            <img src="https://images.pexels.com/photos/4109127/pexels-photo-4109127.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Embutidos Caseros">
                        </div>
                        <div class="menu-card-body">
                            <h3 class="menu-card-name">Embutidos Caseros</h3>
                            <p style="color: var(--neo-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Selecci√≥n de chorizo, salchich√≥n y lomo embuchado</p>
                            <div class="menu-card-footer">
                                <span class="menu-card-price">‚Ç¨22.90</span>
                                <button class="add-to-cart-btn" onclick="addToCartWithEffect('Embutidos Caseros', 22.90, this)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Vino Tinto de la Tierra -->
                    <div class="menu-card">
                        <div class="menu-card-img">
                            <img src="https://images.pexels.com/photos/290316/pexels-photo-290316.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Vino Tinto">
                        </div>
                        <div class="menu-card-body">
                            <h3 class="menu-card-name">Vino Tinto de la Tierra</h3>
                            <p style="color: var(--neo-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Vino crianza 12 meses en barrica, botella 750ml</p>
                            <div class="menu-card-footer">
                                <span class="menu-card-price">‚Ç¨14.50</span>
                                <button class="add-to-cart-btn" onclick="addToCartWithEffect('Vino Tinto de la Tierra', 14.50, this)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Mermelada de Frutos del Bosque -->
                    <div class="menu-card">
                        <div class="menu-card-img">
                            <img src="https://images.pexels.com/photos/4207791/pexels-photo-4207791.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Mermelada de Frutos del Bosque">
                        </div>
                        <div class="menu-card-body">
                            <h3 class="menu-card-name">Mermelada de Frutos del Bosque</h3>
                            <p style="color: var(--neo-text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">Elaborada artesanalmente con frutos silvestres</p>
                            <div class="menu-card-footer">
                                <span class="menu-card-price">‚Ç¨8.90</span>
                                <button class="add-to-cart-btn" onclick="addToCartWithEffect('Mermelada de Frutos del Bosque', 8.90, this)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1.5rem;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- ========== CARRITO ========== -->
        <div id="cartView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-shopping-cart"></i> Mi Carrito</h1>
            </div>
            <div class="app-content">
                <div id="mesaInfoCart" style="background: rgba(0, 240, 255, 0.1); border-radius: 8px; padding: 0.8rem; margin-bottom: 1rem; display: none;">
                    <div style="color: var(--neo-secondary); font-family: 'Orbitron'; font-size: 0.9rem;">
                        <i class="fas fa-table"></i> Mesa: <span id="currentMesaCart">-</span>
                    </div>
                </div>

                <div id="cartItemsContainer"></div>
                
                <div id="emptyCart" class="empty-state" style="display: none; text-align: center; padding: 2rem; color: var(--neo-text-secondary);">
                    <i class="fas fa-shopping-cart" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                    <h3>Tu carrito est√° vac√≠o</h3>
                    <p>¬°A√±ade algunos productos deliciosos!</p>
                </div>

                <div id="cartSummary" style="display: none;">
                    <div class="cart-total">
                        <div>Total del Pedido</div>
                        <div style="font-family: 'Orbitron'; font-size: 1.5rem; color: var(--neo-accent); margin: 0.5rem 0;" id="cartTotalAmount">‚Ç¨0.00</div>
                    </div>
                    
                    <button class="btn-neo btn-primary" onclick="showView('checkoutView')">
                        <i class="fas fa-credit-card"></i> Proceder al Pago
                    </button>
                </div>

                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;" onclick="showView('menuView')">‚Üê Seguir Comprando</button>
            </div>
        </div>

        <!-- ========== CHECKOUT ========== -->
        <div id="checkoutView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-credit-card"></i> Checkout</h1>
            </div>
            <div class="app-content">
                <div class="form-group">
                    <label>Nombre Completo</label>
                    <input type="text" id="checkoutName" class="form-control" placeholder="Como aparece en la tarjeta">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="checkoutEmail" class="form-control" placeholder="tu@email.com">
                </div>

                <div style="background:rgba(30,10,15,0.6); padding:1rem; border-radius:12px; margin:1.5rem 0;">
                    <h3 style="font-family:'Rajdhani';color:var(--neo-accent);margin:0 0 0.8rem;">Resumen del Pedido</h3>
                    <div id="checkoutOrderItems"></div>
                    <div style="font-family:'Orbitron';color:var(--neo-primary);font-size:1.3rem;margin-top:0.8rem;">
                        Total: ‚Ç¨<span id="checkoutTotal">0.00</span>
                    </div>
                </div>

                <h3 style="font-family:'Rajdhani';color:var(--neo-accent);margin:1.5rem 0 1rem;">M√©todo de Pago</h3>
                <div style="display: grid; gap: 0.8rem; margin: 1.5rem 0;">
                    <button class="btn-neo" style="background:linear-gradient(135deg, #6E00FF, #3A00B8); color:white;" onclick="selectPaymentMethod('card')">
                        <i class="fas fa-credit-card"></i> Tarjeta de Cr√©dito
                    </button>
                    <button class="btn-neo" style="background:linear-gradient(135deg, #00F0FF, #00B8FF); color:var(--neo-bg);" onclick="selectPaymentMethod('cash')">
                        <i class="fas fa-money-bill-wave"></i> Efectivo
                    </button>
                </div>

                <button class="btn-neo btn-primary" onclick="processCheckout()">
                    <i class="fas fa-lock"></i> Pagar Ahora
                </button>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;" onclick="showView('cartView')">‚Üê Volver al Carrito</button>
            </div>
        </div>

        <!-- ========== GASTROPASS ========== -->
        <div id="rewardsView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-coins"></i> Mi GastroPass</h1>
            </div>
            <div class="app-content">
                <div class="neo-glass" style="text-align:center; padding:1.5rem; margin-bottom:1.5rem;">
                    <div style="font-family:'Orbitron';font-size:1.3rem;color:var(--neo-accent);margin-bottom:0.5rem;">ü•â Bronce</div>
                    <div style="font-size:0.9rem;color:var(--neo-text-secondary);margin-bottom:0.8rem;">Progreso hacia Plata</div>
                    <div style="background:rgba(0,0,0,0.3);height:12px;border-radius:10px;overflow:hidden;margin:0 0.5rem;">
                        <div style="height:100%;background:linear-gradient(90deg,var(--neo-primary),var(--neo-accent));width:56%;"></div>
                    </div>
                    <div style="font-size:0.85rem;color:var(--neo-text);margin-top:0.5rem;">280 / 500 pts</div>
                </div>

                <div class="neo-glass" style="padding:1.2rem; margin-bottom:1.5rem;">
                    <h3 style="font-family:'Rajdhani';color:var(--neo-accent);margin-bottom:1rem;">üéÅ Tus Beneficios</h3>
                    <div style="font-size:0.95rem;line-height:1.6;">
                        <div>‚Ä¢ Men√∫ digital exclusivo</div>
                        <div>‚Ä¢ Cumplea√±os gratis</div>
                        <div>‚Ä¢ Acceso a eventos del chef</div>
                    </div>
                </div>

                <!-- NUEVO: Funcionalidad para regalar tokens -->
                <div class="neo-glass" style="padding:1.2rem; margin-bottom:1.5rem;">
                    <h3 style="font-family:'Rajdhani';color:var(--neo-accent);margin-bottom:1rem;">üéÅ Regalar Tokens</h3>
                    <div class="token-transfer">
                        <input type="number" id="tokenAmount" class="form-control" placeholder="Cantidad" min="1" max="100">
                        <input type="text" id="friendEmail" class="form-control" placeholder="Email del amigo">
                    </div>
                    <button class="btn-neo btn-accent" onclick="transferTokens()">
                        <i class="fas fa-gift"></i> Enviar Tokens
                    </button>
                </div>

                <!-- NUEVO: Sistema de llamada al camarero mejorado -->
                <div class="neo-glass" style="padding:1.2rem; margin-bottom:1.5rem;">
                    <h3 style="font-family:'Rajdhani';color:var(--neo-accent);margin-bottom:1rem;">üõéÔ∏è Llamar al Camarero</h3>
                    <div class="call-options-grid">
                        <div class="call-option urgent" onclick="callWaiterAdvanced('urgent')">
                            <i class="fas fa-exclamation-triangle" style="font-size:1.5rem; margin-bottom:0.5rem;"></i>
                            <div>Urgente</div>
                            <small>Problema grave</small>
                        </div>
                        <div class="call-option normal" onclick="callWaiterAdvanced('order')">
                            <i class="fas fa-utensils" style="font-size:1.5rem; margin-bottom:0.5rem;"></i>
                            <div>Pedir</div>
                            <small>Hacer pedido</small>
                        </div>
                        <div class="call-option normal" onclick="callWaiterAdvanced('bill')">
                            <i class="fas fa-receipt" style="font-size:1.5rem; margin-bottom:0.5rem;"></i>
                            <div>Cuenta</div>
                            <small>Pagar</small>
                        </div>
                        <div class="call-option normal" onclick="callWaiterAdvanced('other')">
                            <i class="fas fa-question" style="font-size:1.5rem; margin-bottom:0.5rem;"></i>
                            <div>Otro</div>
                            <small>Otra consulta</small>
                        </div>
                    </div>
                    <div id="advancedWaiterTimer" style="display:none; margin-top:1rem;">
                        <div class="timer-display" id="advancedTimerDisplay">05:00</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="advancedProgressFill"></div>
                        </div>
                    </div>
                </div>

                <!-- NUEVO: Formulario para presentar quejas -->
                <div class="complaint-form">
                    <h3 style="font-family:'Rajdhani';color:var(--neo-accent);margin-bottom:1rem;">üìù Presentar Queja</h3>
                    <div class="form-group">
                        <label>Asunto</label>
                        <input type="text" id="complaintSubject" class="form-control" placeholder="Ej: Problema con el servicio">
                    </div>
                    <div class="form-group">
                        <label>Descripci√≥n</label>
                        <textarea id="complaintDescription" class="form-control" placeholder="Describe tu queja en detalle..."></textarea>
                    </div>
                    <button class="btn-neo btn-primary" onclick="submitComplaint()">
                        <i class="fas fa-paper-plane"></i> Enviar Queja
                    </button>
                </div>

                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1.5rem;" onclick="showView('homeView')">‚Üê Volver</button>
            </div>
        </div>

        <!-- ========== LOGIN EMPLEADOS ========== -->
        <div id="employeeLoginView" class="view">
            <div class="app-header">
                <h1><i class="fas fa-user-tie"></i> Acceso Empleados</h1>
            </div>
            <div class="app-content" style="text-align: center;">
                <div style="margin:2rem 0;">
                    <i class="fas fa-key" style="font-size:3rem;color:var(--neo-primary);"></i>
                    <div style="margin-top:1rem;font-family:'Rajdhani';font-size:1.1rem;">Ingresa tu PIN de empleado</div>
                </div>
                <input type="password" id="employeePin" class="form-control" placeholder="****" style="max-width:200px;margin:0 auto;">
                <button class="btn-neo btn-primary" onclick="loginEmployee()" style="margin-top:1.5rem;">
                    Ingresar
                </button>
                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1rem;" onclick="showView('homeView')">
                    ‚Üê Volver
                </button>
            </div>
        </div>

        <!-- ========== PANEL EMPLEADOS ========== -->
        <div id="employeeDashboard" class="view">
            <div class="app-header">
                <h1><i class="fas fa-concierge-bell"></i> Panel Empleados</h1>
            </div>
            <div class="app-content">
                <div class="leaderboard">
                    <div class="leaderboard-title">üèÜ TABLERO DE EMPLEADOS</div>
                    <div id="employeeLeaderboard"></div>
                </div>

                <!-- NUEVO: Sistema de logros para empleados -->
                <div class="neo-glass" style="padding:1rem; margin:1.5rem 0;">
                    <div style="font-family:'Orbitron';color:var(--neo-accent);margin-bottom:0.8rem;">üéØ TUS LOGROS</div>
                    <div id="employeeAchievements">
                        <span class="achievement-badge">‚≠ê 50 Ventas</span>
                        <span class="achievement-badge">üöÄ Velocidad</span>
                        <span class="achievement-badge">üí´ Cliente Estrella</span>
                    </div>
                </div>

                <div class="tables-grid" id="tablesGrid"></div>

                <button class="btn-neo" style="background:#3A1525;color:#E0C0D0;margin-top:1.5rem;" onclick="logoutEmployee()">
                    ‚Üê Cerrar Sesi√≥n
                </button>
            </div>
        </div>

        <!-- ========== PANEL QUANTUM (DUE√ëO) ========== -->
        <div id="ownerDashboard" class="view">
            <div class="app-header">
                <h1><i class="fas fa-user-lock"></i> Panel Quantum</h1>
            </div>
            <div class="app-content">
                <div class="neo-glass" style="padding:1rem; margin-bottom:1.5rem;">
                    <div style="font-family:'Orbitron';color:var(--neo-accent);font-size:1.1rem;margin-bottom:0.8rem;">üìä RESUMEN DEL D√çA</div>
                    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:0.6rem;font-size:0.9rem;">
                        <div><strong>Ingresos:</strong> <span id="dailyRevenue">‚Ç¨420</span></div>
                        <div><strong>Mesas ocupadas:</strong> <span id="occupiedTables">8/12</span></div>
                        <div><strong>Pedidos pendientes:</strong> <span id="pendingOrders">3</span></div>
                        <div><strong>Clientes en espera:</strong> <span id="waitingClients">2</span></div>
                    </div>
                </div>

                <!-- NUEVO: Sistema de vigilancia b√°sico -->
                <div class="neo-glass" style="padding:1rem; margin-bottom:1.5rem;">
                    <div style="font-family:'Orbitron';color:var(--neo-accent);margin-bottom:0.8rem;">üìπ VIGILANCIA EN VIVO</div>
                    <div class="camera-feed">
                        <i class="fas fa-video" style="font-size:2rem;"></i>
                        <div style="margin-left:1rem;">Sistema de c√°maras conectado</div>
                    </div>
                    <button class="btn-neo btn-secondary" onclick="toggleCameraFeed()" style="margin-top:0.8rem;">
                        <i class="fas fa-eye"></i> Ver C√°maras
                    </button>
                </div>

                <!-- NUEVO: Predicci√≥n de demanda -->
                <div class="prediction-card">
                    <div style="font-family:'Orbitron';color:var(--neo-accent);margin-bottom:0.8rem;">üîÆ PREDICCI√ìN DE DEMANDA</div>
                    <div style="font-size:0.9rem; margin-bottom:0.5rem;">Pr√≥xima hora: <strong id="demandPrediction">Alta</strong></div>
                    <div class="prediction-meter">
                        <div class="prediction-fill" id="predictionFill" style="width: 75%;"></div>
                    </div>
                    <div style="font-size:0.8rem; color:var(--neo-text-secondary);">
                        Recomendaci√≥n: <span id="staffRecommendation">+1 camarero</span>
                    </div>
                </div>

                <div class="leaderboard">
                    <div class="leaderboard-title">‚ö° EMPLEADOS DESTACADOS</div>
                    <div id="ownerLeaderboard"></div>
                </div>

                <button class="btn-neo btn-primary" onclick="verifyAllOrders()">
                    ‚úÖ Verificar Todos los Pedidos
                </button>
                <button class="btn-neo" style="background:#e74c3c;color:white;margin-top:1rem;" onclick="logoutOwner()">Cerrar Sesi√≥n</button>
            </div>
        </div>
    </div>

    <!-- Navegaci√≥n Inferior -->
    <div class="app-nav">
        <a href="#" class="nav-item active" onclick="showView('homeView'); return false;">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('bookingView'); return false;">
            <i class="fas fa-calendar"></i>
            <span>Reservas</span>
        </a>
        <a href="#" class="nav-item" onclick="showMenuWithEffects(); return false;">
            <i class="fas fa-book"></i>
            <span>Men√∫</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('qrScannerView'); return false;">
            <i class="fas fa-qrcode"></i>
            <span>Escanear</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('cartView'); return false;" id="cartNavItem">
            <i class="fas fa-shopping-cart"></i>
            <span>Carrito</span>
            <div class="cart-badge" id="cartBadge" style="display: none;">0</div>
        </a>
    </div>

    <script>
        // === DATOS DEL MEN√ö MEJORADO ===
        const menuData = {
            entradas: {
                title: "üöÄ ENTRADAS C√ìSMICAS",
                items: [
                    {
                        name: "TARTAR DE AT√öN QUANTUM",
                        description: "At√∫n de aguas profundas con algas espaciales, emulsi√≥n de wasabi y crujiente de s√©samo negro. Una explosi√≥n de sabores del oc√©ano.",
                        price: 18.50,
                        image: "https://images.pexels.com/photos/3764643/pexels-photo-3764643.jpeg",
                        ingredients: ["At√∫n rojo premium", "Algas nori", "Aguacate", "S√©samo negro", "Wasabi", "Salsa de soja"],
                        highlight: true,
                        cookingTime: "10 min"
                    },
                    {
                        name: "BRUSCHETTA GAL√ÅCTICA",
                        description: "Pan de cristal artesanal con tomates hidrop√≥nicos, albahaca fresca y aceite de oliva lunar. Texturas del espacio.",
                        price: 12.90,
                        image: "https://images.pexels.com/photos/7049761/pexels-photo-7049761.jpeg",
                        ingredients: ["Pan cristal", "Tomate hidrop√≥nico", "Albahaca fresca", "Ajo", "Aceite de oliva virgen"],
                        highlight: false,
                        cookingTime: "5 min"
                    },
                    {
                        name: "CEVICHE NEBULOSA",
                        description: "Corvina de roca marinada en leche de tigre con toques c√≠tricos y ma√≠z andino. Frescura interestelar.",
                        price: 16.75,
                        image: "https://images.pexels.com/photos/954677/pexels-photo-954677.jpeg",
                        ingredients: ["Corvina fresca", "Lim√≥n", "Cilantro", "Cebolla morada", "Aj√≠ limo", "Ma√≠z andino"],
                        highlight: true,
                        cookingTime: "15 min"
                    },
                    {
                        name: "CROQUETAS DE JAM√ìN IB√âRICO",
                        description: "Cremosas croquetas con jam√≥n ib√©rico de bellota y bechamel de trufa negra. Tradici√≥n mejorada.",
                        price: 14.25,
                        image: "https://images.pexels.com/photos/1055270/pexels-photo-1055270.jpeg",
                        ingredients: ["Jam√≥n ib√©rico", "Trufa negra", "Bechamel", "Pan rallado", "Aceite de oliva"],
                        highlight: false,
                        cookingTime: "8 min"
                    }
                ]
            },
            principales: {
                title: "‚ö° PLATOS PRINCIPALES",
                items: [
                    {
                        name: "FILETE WAGYU A5",
                        description: "Exquisito filete de res Wagyu grado A5 con pur√© de ra√≠ces trufado y reducci√≥n de vino tinto envejecido.",
                        price: 89.90,
                        image: "https://images.pexels.com/photos/3535383/pexels-photo-3535383.jpeg",
                        ingredients: ["Wagyu A5", "Trufa negra", "Pur√© de patata", "Vino tinto reserva", "Mantequilla"],
                        highlight: true,
                        cookingTime: "25 min"
                    },
                    {
                        name: "RISOTTO DE AZAFR√ÅN Y GAMBAS",
                        description: "Arroz carnaroli cremoso con azafr√°n de La Mancha, gambas rojas y parmesano 36 meses.",
                        price: 24.50,
                        image: "https://images.pexels.com/photos/1279330/pexels-photo-1279330.jpeg",
                        ingredients: ["Arroz carnaroli", "Azafr√°n", "Gambas rojas", "Parmesano", "Caldo de marisco"],
                        highlight: false,
                        cookingTime: "20 min"
                    },
                    {
                        name: "SALM√ìN GLASEADO CON MIEL",
                        description: "Lomo de salm√≥n noruego glaseado con miel de flores y acompa√±ado de verduras de temporada.",
                        price: 22.75,
                        image: "https://images.pexels.com/photos/3297807/pexels-photo-3297807.jpeg",
                        ingredients: ["Salm√≥n noruego", "Miel", "Verduras de temporada", "Eneldo", "Lim√≥n"],
                        highlight: true,
                        cookingTime: "18 min"
                    }
                ]
            },
            postres: {
                title: "üåå POSTRES ESTELARES",
                items: [
                    {
                        name: "ESFERA DE CHOCOLATE Y ORO",
                        description: "Esfera de chocolate 70% cacao con coraz√≥n l√≠quido de frutos rojos y l√°minas de oro comestible 24k.",
                        price: 14.90,
                        image: "https://images.pexels.com/photos/302478/pexels-photo-302478.jpeg",
                        ingredients: ["Chocolate 70%", "Frutos rojos", "Oro comestible", "Helado de vainilla", "Menta"],
                        highlight: true,
                        cookingTime: "12 min"
                    },
                    {
                        name: "TORRIJA GAL√ÅCTICA",
                        description: "Torrija caramelizada con helado de canela y polvo de constelaci√≥n de frutos secos.",
                        price: 11.50,
                        image: "https://images.pexels.com/photos/2133989/pexels-photo-2133989.jpeg",
                        ingredients: ["Pan brioche", "Leche", "Canela", "Helado artesanal", "Caramelo"],
                        highlight: false,
                        cookingTime: "15 min"
                    },
                    {
                        name: "MOUSSE DE FRAMBUESA",
                        description: "Mousse ligera de frambuesa con base de galleta y coulis de frutos del bosque.",
                        price: 9.75,
                        image: "https://images.pexels.com/photos/132694/pexels-photo-132694.jpeg",
                        ingredients: ["Frambuesas", "Nata", "Galleta", "Gelatina", "Az√∫car"],
                        highlight: false,
                        cookingTime: "10 min"
                    }
                ]
            },
            bebidas: {
                title: "üí´ BEBIDAS INTERGAL√ÅCTICAS",
                items: [
                    {
                        name: "COCTEL NEBULA",
                        description: "Ginebra premium, licor de flor de sa√∫co, zumo de lim√≥n fresco y t√≥nica espumosa con toques c√≠tricos.",
                        price: 15.00,
                        image: "https://images.pexels.com/photos/1283219/pexels-photo-1283219.jpeg",
                        ingredients: ["Ginebra", "Flor de sa√∫co", "Lim√≥n", "T√≥nica", "Hierbas"],
                        highlight: true,
                        cookingTime: "5 min"
                    },
                    {
                        name: "VINO TINTO RESERVA ESPECIAL",
                        description: "Selecci√≥n de vinos tintos de a√±adas excepcionales con crianza en barricas de roble franc√©s.",
                        price: 8.50,
                        image: "https://images.pexels.com/photos/290316/pexels-photo-290316.jpeg",
                        ingredients: ["Uvas tempranillo", "Barrica de roble", "A√±ada especial"],
                        highlight: false,
                        cookingTime: "2 min"
                    },
                    {
                        name: "ZUMO DETOX ENERG√âTICO",
                        description: "Mezcla revitalizante de jengibre, lim√≥n, manzana verde y espinacas. Cargado de energ√≠a positiva.",
                        price: 6.90,
                        image: "https://images.pexels.com/photos/158109/kale-vegetables-healthy-158109.jpeg",
                        ingredients: ["Jengibre", "Lim√≥n", "Manzana verde", "Espinacas", "Miel"],
                        highlight: true,
                        cookingTime: "3 min"
                    }
                ]
            }
        };

        // === ESTADO GLOBAL MEJORADO ===
        let appState = {
            user: null,
            employee: null,
            cart: JSON.parse(localStorage.getItem('gastroneo_cart')) || [],
            employees: [
                { id: 'emp_1', name: 'Carlos Rodr√≠guez', points: 850, level: 'diamante', todayPoints: 45, achievements: ['50 Ventas', 'Velocidad'] },
                { id: 'emp_2', name: 'Ana Mart√≠nez', points: 720, level: 'oro', todayPoints: 32, achievements: ['Cliente Estrella'] },
                { id: 'emp_3', name: 'Luis Garc√≠a', points: 450, level: 'plata', todayPoints: -12, achievements: [] }
            ],
            activities: [],
            waiterTimer: null,
            waiterTimeLeft: 300, // 5 minutos en segundos
            cameraEnabled: false,
            demandPrediction: 75 // Porcentaje de predicci√≥n de demanda
        };

        // === INICIALIZACI√ìN ===
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                initializeApp();
            }, 2500);
        });

        function initializeApp() {
            loadUser();
            updateCartBadge();
            checkMesaEscaneada();
            startLiveActivities();
            renderEmployeeLeaderboard();
            renderTablesGrid();
            createFloatingParticles();
            showCategory('entradas');
            updateDemandPrediction();
        }

        // === CREAR PART√çCULAS FLOTANTES ===
        function createFloatingParticles() {
            const container = document.getElementById('floatingParticles');
            const colors = ['#00F0FF', '#FF2A6D', '#FFD300', '#6E00FF'];
            
            for (let i = 0; i < 25; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (6 + Math.random() * 6) + 's';
                container.appendChild(particle);
            }
        }

        // === SISTEMA DE VISTAS ===
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            const viewToNavMap = {
                'homeView': 0, 'bookingView': 1, 'menuView': 2, 'qrScannerView': 3, 'cartView': 4
            };
            
            if (viewToNavMap[viewId] !== undefined) {
                document.querySelectorAll('.nav-item')[viewToNavMap[viewId]].classList.add('active');
            }

            // Acciones espec√≠ficas por vista
            if (viewId === 'cartView') renderCart();
            if (viewId === 'checkoutView') renderCheckout();
            if (viewId === 'employeeDashboard') renderEmployeeDashboard();
            if (viewId === 'ownerDashboard') renderOwnerDashboard();
        }

        // === EFECTO DE ENTRADA ESPECTACULAR PARA EL MEN√ö ===
        function showMenuWithEffects() {
            const portal = document.getElementById('quantumPortal');
            
            // Mostrar portal de entrada
            portal.style.display = 'block';
            portal.style.animation = 'none';
            void portal.offsetWidth; // Trigger reflow
            portal.style.animation = 'portal-expand 1.5s ease-out';
            
            // Aplicar efecto hologr√°fico al men√∫
            setTimeout(() => {
                showView('menuView');
                const menuView = document.getElementById('menuView');
                menuView.classList.add('hologram-enter');
                portal.style.display = 'none';
                
                // Mostrar notificaci√≥n de bienvenida
                createNotification('success', 'üöÄ Men√∫ Quantum Activado', 'Bienvenido a la experiencia gastron√≥mica del futuro');
            }, 1000);
        }

        // === MOSTRAR CATEGOR√çA ===
        function showCategory(category) {
            const menuContent = document.getElementById('menuContent');
            const categoryData = menuData[category];
            
            // Actualizar botones activos
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Generar HTML de la categor√≠a
            let html = `
                <h2 class="category-title">${categoryData.title}</h2>
            `;
            
            categoryData.items.forEach((item, index) => {
                html += `
                    <div class="menu-card ${item.highlight ? 'pulse-effect' : ''}" 
                         style="animation-delay: ${index * 0.1}s">
                        ${item.highlight ? `<div class="highlight-badge">‚≠ê RECOMENDADO</div>` : ''}
                        <div class="menu-card-img">
                            <img src="${item.image}" alt="${item.name}">
                        </div>
                        <div class="menu-card-body">
                            <h3 class="menu-card-name">${item.name}</h3>
                            <p class="menu-card-desc">${item.description}</p>
                            
                            <div class="ingredients-container">
                                <div style="font-size: 0.85rem; color: var(--neo-secondary); margin-bottom: 0.5rem;">
                                    <strong>Ingredientes:</strong>
                                </div>
                                <div>
                                    ${item.ingredients.map(ing => `
                                        <span class="ingredient-tag">${ing}</span>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                                <div>
                                    <div class="menu-card-price">‚Ç¨${item.price.toFixed(2)}</div>
                                    <div style="font-size: 0.8rem; color: var(--neo-text-secondary);">
                                        <i class="fas fa-clock"></i> ${item.cookingTime}
                                    </div>
                                </div>
                                <button class="add-to-cart-btn" onclick="addToCartWithEffect('${item.name}', ${item.price}, this)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            menuContent.innerHTML = html;
        }

        // === A√ëADIR AL CARRITO CON EFECTO VISUAL ESPECTACULAR ===
        function addToCartWithEffect(itemName, price, button) {
            // Crear elemento de animaci√≥n
            const animation = document.createElement('div');
            animation.className = 'cart-animation';
            animation.innerHTML = `
                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--neo-primary), #D10047); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                    <i class="fas fa-plus"></i>
                </div>
            `;
            
            // Posicionar animaci√≥n
            const rect = button.getBoundingClientRect();
            animation.style.left = (rect.left + rect.width/2 - 25) + 'px';
            animation.style.top = (rect.top + rect.height/2 - 25) + 'px';
            
            document.body.appendChild(animation);
            
            // Efecto en el bot√≥n
            button.innerHTML = '<i class="fas fa-check"></i>';
            button.style.background = 'linear-gradient(135deg, #00D100, #009900)';
            button.style.transform = 'scale(1.2)';
            
            // A√±adir al carrito real
            const existingItem = appState.cart.find(item => item.name === itemName);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                appState.cart.push({ name: itemName, price: price, quantity: 1 });
            }
            
            localStorage.setItem('gastroneo_cart', JSON.stringify(appState.cart));
            updateCartBadge();
            
            // Restaurar bot√≥n despu√©s de 1 segundo
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-plus"></i>';
                button.style.background = 'linear-gradient(135deg, var(--neo-primary), #D10047)';
                button.style.transform = 'scale(1)';
            }, 1000);
            
            // Eliminar animaci√≥n
            setTimeout(() => {
                animation.remove();
            }, 1000);
            
            // Mostrar notificaci√≥n
            createNotification('success', 'üõí ¬°A√±adido!', `${itemName} se ha a√±adido al carrito`);
        }

        // === SISTEMA DE USUARIOS ===
        function loadUser() {
            const user = JSON.parse(localStorage.getItem('gastroneo_user'));
            if (user) {
                appState.user = user;
                renderUserProfile();
            } else {
                renderAuthSection();
            }
        }

        function renderUserProfile() {
            const container = document.getElementById('authOrProfile');
            container.innerHTML = `
                <div class="neo-glass" style="padding: 1rem; text-align: center; margin-bottom: 1rem;">
                    <div style="font-family: 'Orbitron'; color: var(--neo-accent); font-size: 1.2rem;">
                        Hola, ${appState.user.name} ‚ú®
                    </div>
                    <div style="color: var(--neo-secondary); margin-top: 0.5rem;">
                        GastroTokens: ${appState.user.tokens || 0}
                    </div>
                </div>
            `;
        }

        function renderAuthSection() {
            const container = document.getElementById('authOrProfile');
            container.innerHTML = `
                <div class="neo-holographic" style="padding: 1.5rem; text-align: center; margin-bottom: 1.5rem; border-radius: 16px;">
                    <div style="font-family: 'Orbitron'; color: var(--neo-accent); font-size: 1.3rem; margin-bottom: 1rem;">
                        ¬øNUEVO EN GASTRONEO?
                    </div>
                    <div style="color: var(--neo-text-secondary); margin-bottom: 1.5rem; line-height: 1.5;">
                        Crea tu GastroPass y accede a recompensas exclusivas del futuro.
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button class="btn-neo btn-accent" onclick="showSignupModal()">
                            Crear Cuenta
                        </button>
                        <button class="btn-neo btn-primary" onclick="showLoginModal()">
                            Iniciar Sesi√≥n
                        </button>
                    </div>
                </div>
            `;
        }

        function showSignupModal() {
            const name = prompt("¬øCu√°l es tu nombre?");
            const email = prompt("¬øCu√°l es tu email?");
            if (name && email) {
                appState.user = { name: name.trim(), email: email, tokens: 50 };
                localStorage.setItem('gastroneo_user', JSON.stringify(appState.user));
                alert("¬°Bienvenido! üéÅ 50 GastroTokens de bienvenida.");
                renderUserProfile();
                createNotification('success', '¬°Cuenta Creada!', 'Bienvenido a GastroNeo Quantum');
            }
        }

        function showLoginModal() {
            const name = prompt("Ingresa tu nombre:");
            if (name) {
                const existing = JSON.parse(localStorage.getItem('gastroneo_user'));
                if (existing && existing.name === name.trim()) {
                    appState.user = existing;
                    renderUserProfile();
                    alert("¬°Bienvenido de nuevo!");
                } else {
                    alert("Usuario no encontrado. Cr√©ate una cuenta.");
                }
            }
        }

        // === SISTEMA DE CARRITO ===
        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            const totalItems = appState.cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (totalItems > 0) {
                badge.textContent = totalItems;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        function renderCart() {
            const container = document.getElementById('cartItemsContainer');
            const emptyCart = document.getElementById('emptyCart');
            const cartSummary = document.getElementById('cartSummary');
            const totalAmount = document.getElementById('cartTotalAmount');
            
            if (appState.cart.length === 0) {
                emptyCart.style.display = 'block';
                cartSummary.style.display = 'none';
                container.innerHTML = '';
                return;
            }
            
            emptyCart.style.display = 'none';
            cartSummary.style.display = 'block';
            
            let total = 0;
            container.innerHTML = appState.cart.map(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                return `
                    <div class="cart-item">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: var(--neo-accent);">${item.name}</div>
                            <div style="color: var(--neo-primary);">‚Ç¨${item.price.toFixed(2)} c/u</div>
                        </div>
                        <div class="cart-item-controls">
                            <button class="quantity-btn" onclick="updateQuantity('${item.name}', -1)">-</button>
                            <span style="margin: 0 0.5rem; min-width: 20px; text-align: center;">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateQuantity('${item.name}', 1)">+</button>
                            <button class="quantity-btn" onclick="removeFromCart('${item.name}')" style="background: #e74c3c;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            totalAmount.textContent = `‚Ç¨${total.toFixed(2)}`;
        }

        function updateQuantity(itemName, change) {
            const item = appState.cart.find(item => item.name === itemName);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(itemName);
                } else {
                    localStorage.setItem('gastroneo_cart', JSON.stringify(appState.cart));
                    updateCartBadge();
                    renderCart();
                }
            }
        }

        function removeFromCart(itemName) {
            appState.cart = appState.cart.filter(item => item.name !== itemName);
            localStorage.setItem('gastroneo_cart', JSON.stringify(appState.cart));
            updateCartBadge();
            renderCart();
        }

        // === CHECKOUT ===
        function renderCheckout() {
            const itemsContainer = document.getElementById('checkoutOrderItems');
            const totalElement = document.getElementById('checkoutTotal');
            
            let total = 0;
            itemsContainer.innerHTML = appState.cart.map(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                return `
                    <div style="display:flex;justify-content:space-between;font-size:0.9rem;margin-bottom:0.5rem;">
                        <span>${item.name} x${item.quantity}</span>
                        <span>‚Ç¨${itemTotal.toFixed(2)}</span>
                    </div>
                `;
            }).join('');
            
            totalElement.textContent = total.toFixed(2);
        }

        function processCheckout() {
            const name = document.getElementById('checkoutName').value;
            const email = document.getElementById('checkoutEmail').value;

            if (!name || !email) {
                alert("Por favor, completa todos los datos.");
                return;
            }

            const total = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            // Simular pago
            alert(`‚úÖ ¬°Pago realizado con √©xito!\nTotal: ‚Ç¨${total.toFixed(2)}\n\nRecibir√°s un email de confirmaci√≥n.`);
            
            // Limpiar carrito
            appState.cart = [];
            localStorage.setItem('gastroneo_cart', JSON.stringify(appState.cart));
            updateCartBadge();
            
            showView('homeView');
        }

        // === GASTROPASS ===
        function redeemReward(cost, item) {
            if (!appState.user) { 
                alert("Crea una cuenta para canjear recompensas."); 
                return; 
            }
            
            if (appState.user.tokens < cost) { 
                alert(`‚ö†Ô∏è Necesitas ${cost} tokens. Tienes ${appState.user.tokens}.`); 
                return; 
            }
            
            appState.user.tokens -= cost;
            localStorage.setItem('gastroneo_user', JSON.stringify(appState.user));
            alert(`‚úÖ ¬°Canjeado! ${item}`);
            renderUserProfile();
        }

        // === NUEVAS FUNCIONALIDADES AVANZADAS ===

        // Transferir tokens a un amigo
        function transferTokens() {
            if (!appState.user) {
                alert("Debes iniciar sesi√≥n para transferir tokens.");
                return;
            }
            
            const tokenAmount = parseInt(document.getElementById('tokenAmount').value);
            const friendEmail = document.getElementById('friendEmail').value;
            
            if (!tokenAmount || tokenAmount <= 0) {
                alert("Por favor, ingresa una cantidad v√°lida de tokens.");
                return;
            }
            
            if (!friendEmail || !friendEmail.includes('@')) {
                alert("Por favor, ingresa un email v√°lido.");
                return;
            }
            
            if (tokenAmount > appState.user.tokens) {
                alert(`No tienes suficientes tokens. Tienes ${appState.user.tokens} tokens.`);
                return;
            }
            
            appState.user.tokens -= tokenAmount;
            localStorage.setItem('gastroneo_user', JSON.stringify(appState.user));
            
            alert(`‚úÖ ¬°Has enviado ${tokenAmount} tokens a ${friendEmail}!`);
            renderUserProfile();
            
            // Limpiar formulario
            document.getElementById('tokenAmount').value = '';
            document.getElementById('friendEmail').value = '';
        }

        // Llamada al camarero mejorada con prioridades
        function callWaiterAdvanced(type) {
            if (!appState.user) {
                alert("Debes iniciar sesi√≥n para llamar al camarero.");
                return;
            }
            
            const timerDisplay = document.getElementById('advancedTimerDisplay');
            const progressFill = document.getElementById('advancedProgressFill');
            const timerContainer = document.getElementById('advancedWaiterTimer');
            
            // Configurar seg√∫n el tipo de llamada
            const callTypes = {
                'urgent': { time: 120, message: 'üö® URGENTE - Ayuda inmediata requerida', priority: 1 },
                'order': { time: 300, message: 'üìù Cliente quiere hacer un pedido', priority: 2 },
                'bill': { time: 180, message: 'üí≥ Cliente solicita la cuenta', priority: 1 },
                'other': { time: 300, message: '‚ùì Cliente necesita asistencia', priority: 3 }
            };
            
            const callConfig = callTypes[type];
            
            // Mostrar temporizador
            timerContainer.style.display = 'block';
            appState.waiterTimeLeft = callConfig.time;
            updateAdvancedTimerDisplay();
            
            // Notificar al sistema
            createNotification('success', 'Camarero Notificado', callConfig.message);
            addActivity('positive', `Cliente ${appState.user.name}: ${callConfig.message}`);
            
            // Iniciar temporizador
            if (appState.waiterTimer) {
                clearInterval(appState.waiterTimer);
            }
            
            appState.waiterTimer = setInterval(() => {
                appState.waiterTimeLeft--;
                updateAdvancedTimerDisplay();
                
                if (appState.waiterTimeLeft <= 0) {
                    clearInterval(appState.waiterTimer);
                    createNotification('warning', 'Tiempo Agotado', 'El camarero no ha llegado. ¬øNecesitas ayuda adicional?');
                }
            }, 1000);
        }

        function updateAdvancedTimerDisplay() {
            const timerDisplay = document.getElementById('advancedTimerDisplay');
            const progressFill = document.getElementById('advancedProgressFill');
            
            const minutes = Math.floor(appState.waiterTimeLeft / 60);
            const seconds = appState.waiterTimeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const callTypes = {
                'urgent': 120, 'order': 300, 'bill': 180, 'other': 300
            };
            
            // Calcular progreso basado en el tipo de llamada
            const maxTime = 300; // 5 minutos m√°ximo
            const progressPercentage = ((maxTime - appState.waiterTimeLeft) / maxTime) * 100;
            progressFill.style.width = `${progressPercentage}%`;
        }

        // Presentar queja
        function submitComplaint() {
            if (!appState.user) {
                alert("Debes iniciar sesi√≥n para presentar una queja.");
                return;
            }
            
            const subject = document.getElementById('complaintSubject').value;
            const description = document.getElementById('complaintDescription').value;
            
            if (!subject || !description) {
                alert("Por favor, completa todos los campos.");
                return;
            }
            
            // Simular env√≠o de queja
            alert("‚úÖ Tu queja ha sido enviada. Nos pondremos en contacto contigo pronto.");
            
            // Limpiar formulario
            document.getElementById('complaintSubject').value = '';
            document.getElementById('complaintDescription').value = '';
            
            // Notificar al sistema
            createNotification('warning', 'Queja Registrada', 'Hemos recibido tu queja y la estamos revisando.');
            addActivity('negative', `Cliente ${appState.user.name} present√≥ una queja: ${subject}`);
        }

        // === ESCANER QR ===
        function simulateQRScan() {
            const mesaAleatoria = Math.floor(Math.random() * 12) + 1;
            localStorage.setItem('gastroneo_mesa_escaneada', mesaAleatoria);
            
            alert(`‚úÖ Mesa ${mesaAleatoria} detectada!\nRedirigiendo al men√∫...`);
            showMenuWithEffects();
        }

        function checkMesaEscaneada() {
            const mesa = localStorage.getItem('gastroneo_mesa_escaneada');
            const mesaInfo = document.getElementById('mesaInfo');
            const currentMesa = document.getElementById('currentMesa');
            const mesaInfoCart = document.getElementById('mesaInfoCart');
            const currentMesaCart = document.getElementById('currentMesaCart');
            
            if (mesa) {
                if (mesaInfo) {
                    mesaInfo.style.display = 'block';
                    currentMesa.textContent = mesa;
                }
                if (mesaInfoCart) {
                    mesaInfoCart.style.display = 'block';
                    currentMesaCart.textContent = mesa;
                }
            }
        }

        // === RESERVAS ===
        function confirmBooking() {
            if (!appState.user) {
                alert("Por favor, crea una cuenta primero.");
                return;
            }

            appState.user.tokens = (appState.user.tokens || 0) + 100;
            localStorage.setItem('gastroneo_user', JSON.stringify(appState.user));
            
            alert("‚úÖ ¬°Reserva confirmada!\n+100 GastroTokens.");
            showView('homeView');
        }

        // === EMPLEADOS ===
        function loginEmployee() {
            const pin = document.getElementById('employeePin').value;
            if (pin === "9876") {
                appState.employee = { name: "Empleado Demo", role: "mesero" };
                showView('employeeDashboard');
            } else {
                alert("PIN incorrecto.");
            }
        }

        function logoutEmployee() {
            appState.employee = null;
            showView('homeView');
        }

        function renderEmployeeLeaderboard() {
            const container = document.getElementById('employeeLeaderboard');
            if (!container) return;

            const sortedEmployees = [...appState.employees].sort((a, b) => b.points - a.points);
            
            container.innerHTML = sortedEmployees.map(emp => `
                <div class="leaderboard-item">
                    <div class="rank-badge rank-${emp.level}">${emp.points}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600;">${emp.name}</div>
                        <div style="font-size: 0.8rem; color: var(--neo-text-secondary);">
                            ${emp.level.toUpperCase()} 
                            ${emp.todayPoints !== 0 ? 
                                `<span style="color: ${emp.todayPoints > 0 ? '#00FF00' : '#FF4444'};">
                                    ${emp.todayPoints > 0 ? '+' : ''}${emp.todayPoints}
                                </span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderEmployeeDashboard() {
            renderEmployeeLeaderboard();
            renderTablesGrid();
            
            // Mostrar logros del empleado actual
            const currentEmployee = appState.employees[0]; // Simulamos que es el primero
            const achievementsContainer = document.getElementById('employeeAchievements');
            
            if (currentEmployee.achievements.length > 0) {
                achievementsContainer.innerHTML = currentEmployee.achievements.map(achievement => 
                    `<span class="achievement-badge">${achievement}</span>`
                ).join('');
            }
        }

        function renderTablesGrid() {
            const grid = document.getElementById('tablesGrid');
            if (!grid) return;

            grid.innerHTML = '';
            for (let i = 1; i <= 12; i++) {
                const status = i <= 8 ? 'occupied' : 'free';
                const card = document.createElement('div');
                card.className = `table-card table-${status}`;
                card.innerHTML = `
                    <div style="font-size: 1.2rem; font-weight: 700;">${i}</div>
                    <div style="font-size: 0.7rem;">${status === 'free' ? 'Libre' : 'Ocupada'}</div>
                `;
                card.onclick = () => openTableDetail(i, status);
                grid.appendChild(card);
            }
        }

        function openTableDetail(tableNum, status) {
            alert(`Mesa ${tableNum} - ${status === 'free' ? 'Libre' : 'Ocupada'}`);
        }

        // === PANEL QUANTUM (DUE√ëO) ===
        function openOwnerAccess() {
            const pin = prompt("üîê PIN QUANTUM (demo: 1234):");
            if (pin === "1234") {
                showView('ownerDashboard');
            } else if (pin) {
                alert("‚ö†Ô∏è PIN incorrecto.");
            }
        }

        function logoutOwner() {
            showView('homeView');
        }

        function renderOwnerDashboard() {
            // Actualizar m√©tricas
            document.getElementById('dailyRevenue').textContent = '‚Ç¨' + (Math.random() * 1000 + 200).toFixed(0);
            document.getElementById('occupiedTables').textContent = Math.floor(Math.random() * 6 + 6) + '/12';
            document.getElementById('pendingOrders').textContent = Math.floor(Math.random() * 5);
            document.getElementById('waitingClients').textContent = Math.floor(Math.random() * 3);
            
            // Renderizar leaderboard
            const container = document.getElementById('ownerLeaderboard');
            const sortedEmployees = [...appState.employees].sort((a, b) => b.points - a.points);
            
            container.innerHTML = sortedEmployees.map(emp => `
                <div class="leaderboard-item">
                    <div class="rank-badge rank-${emp.level}">${emp.points}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600;">${emp.name}</div>
                        <div style="font-size: 0.8rem; color: var(--neo-text-secondary);">
                            ${emp.level.toUpperCase()} | Hoy: 
                            <span style="color: ${emp.todayPoints > 0 ? '#00FF00' : '#FF4444'};">
                                ${emp.todayPoints > 0 ? '+' : ''}${emp.todayPoints}pts
                            </span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function toggleCameraFeed() {
            appState.cameraEnabled = !appState.cameraEnabled;
            const cameraFeed = document.querySelector('.camera-feed');
            
            if (appState.cameraEnabled) {
                cameraFeed.innerHTML = `
                    <div style="text-align: center;">
                        <i class="fas fa-video" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                        <div>Feed de c√°mara simulado</div>
                        <div style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--neo-accent);">
                            üî¥ EN VIVO - Sala Principal
                        </div>
                    </div>
                `;
                cameraFeed.style.background = 'rgba(0,240,255,0.1)';
                createNotification('success', 'C√°maras Activadas', 'Sistema de vigilancia en l√≠nea');
            } else {
                cameraFeed.innerHTML = `
                    <i class="fas fa-video" style="font-size: 2rem;"></i>
                    <div style="margin-left: 1rem;">Sistema de c√°maras conectado</div>
                `;
                cameraFeed.style.background = 'rgba(0,0,0,0.5)';
            }
        }

        function updateDemandPrediction() {
            // Simular predicci√≥n de demanda
            const prediction = Math.floor(Math.random() * 100);
            appState.demandPrediction = prediction;
            
            const predictionElement = document.getElementById('demandPrediction');
            const predictionFill = document.getElementById('predictionFill');
            const staffRecommendation = document.getElementById('staffRecommendation');
            
            predictionFill.style.width = `${prediction}%`;
            
            if (prediction >= 80) {
                predictionElement.textContent = 'Muy Alta';
                predictionElement.style.color = 'var(--neo-primary)';
                staffRecommendation.textContent = '+2 camareros recomendados';
            } else if (prediction >= 60) {
                predictionElement.textContent = 'Alta';
                predictionElement.style.color = 'var(--neo-accent)';
                staffRecommendation.textContent = '+1 camarero recomendado';
            } else if (prediction >= 40) {
                predictionElement.textContent = 'Moderada';
                predictionElement.style.color = 'var(--neo-secondary)';
                staffRecommendation.textContent = 'Personal adecuado';
            } else {
                predictionElement.textContent = 'Baja';
                predictionElement.style.color = 'var(--neo-text-secondary)';
                staffRecommendation.textContent = 'Personal reducido posible';
            }
        }

        function verifyAllOrders() {
            alert("‚úÖ Todos los pedidos verificados y actualizados.");
            createNotification('success', 'Pedidos Verificados', 'Todos los pedidos han sido revisados');
        }

        // === ACTIVIDAD EN VIVO ===
        function startLiveActivities() {
            // Actividades iniciales
            addActivity('positive', 'Sistema GastroNeo Quantum iniciado');
            addActivity('positive', '3 nuevas reservas esta ma√±ana');
            
            // Simular actividad cada 20 segundos
            setInterval(() => {
                const activities = [
                    'positive: Carlos +10pts: Cliente elogi√≥ servicio',
                    'positive: Ana +8pts: Upselling exitoso',
                    'negative: Luis -12pts: Tiempo excedido',
                    'positive: Sistema: Pedido completado Mesa 5'
                ];
                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                const [type, message] = randomActivity.split(': ');
                addActivity(type, message);
            }, 20000);
        }

        function addActivity(type, message) {
            const activity = {
                id: Date.now(),
                type: type,
                message: message,
                timestamp: new Date().toLocaleTimeString()
            };
            
            appState.activities.unshift(activity);
            appState.activities = appState.activities.slice(0, 5); // Mantener solo 5
            renderActivityFeed();
        }

        function renderActivityFeed() {
            const feed = document.getElementById('liveActivityFeed');
            if (!feed) return;
            
            feed.innerHTML = appState.activities.map(activity => `
                <div class="activity-item activity-${activity.type}">
                    <div>${activity.message}</div>
                    <div style="font-size: 0.7rem; color: var(--neo-text-secondary); margin-top: 0.2rem;">
                        ${activity.timestamp}
                    </div>
                </div>
            `).join('');
        }

        // === NOTIFICACIONES ===
        function createNotification(type, title, message) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <div style="font-family: 'Orbitron'; font-weight: 700;">${title}</div>
                    <div style="font-size: 0.8rem; color: var(--neo-text-secondary);">Ahora</div>
                </div>
                <div style="font-size: 0.85rem;">${message}</div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>
