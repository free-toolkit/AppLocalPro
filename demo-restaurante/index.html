<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GastroNeo: Restaurante del Futuro con IA, Gamificación y Neo-Glassmorphism">
    <title>GastroNeo – Revolución Gastronómica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FF2A6D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GastroNeo">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" href="icon-192.png">

    <style>
        /* === VARIABLES NEO-GLASSMORPHISM === */
        :root {
            --neo-primary: #FF2A6D;
            --neo-secondary: #00F0FF;
            --neo-accent: #FFD300;
            --neo-purple: #6E00FF;
            --neo-bg: #0D0916;
            --neo-bg-light: #1A0A10;
            --neo-text: #FFD6E0;
            --neo-text-secondary: #D0B0C0;
        }

        /* === ESTILOS BASE NEO-GLASSMORPHISM === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: var(--neo-bg);
            color: var(--neo-text);
            overflow-x: hidden;
            font-family: 'Rajdhani', sans-serif;
            min-height: 100vh;
        }

        /* === NEO-GLASSMORPHISM PRINCIPAL === */
        .neo-glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .neo-holographic {
            background: linear-gradient(125deg, 
                rgba(255, 42, 109, 0.1) 0%,
                rgba(0, 240, 255, 0.1) 50%,
                rgba(110, 0, 255, 0.1) 100%);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 240, 255, 0.3);
        }

        .neo-holographic::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent
            );
            animation: hologram-shine 3s infinite;
        }

        @keyframes hologram-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* === APP CONTAINER === */
        .app-container {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--neo-bg-light);
            position: relative;
            overflow: hidden;
        }

        /* === HEADER HOLOGRÁFICO === */
        .app-header {
            background: linear-gradient(135deg, var(--neo-primary), var(--neo-accent));
            padding: 1.2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .app-header::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.6), 
                transparent
            );
            animation: header-shine 4s infinite;
        }

        @keyframes header-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .app-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 900;
            color: white;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            letter-spacing: 2px;
        }

        /* === CONTENIDO PRINCIPAL === */
        .app-content {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: rgba(34, 15, 24, 0.7);
        }

        .view { display: none; }
        .view.active { display: block; }

        /* === SPLASH SCREEN NEO === */
        #splashScreen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--neo-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            color: white;
            overflow: hidden;
        }

        .splash-logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--neo-primary), var(--neo-accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 50px rgba(255, 42, 109, 0.8);
            animation: pulse 2s infinite;
            position: relative;
            overflow: hidden;
        }

        .splash-logo::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent
            );
            animation: logo-rotate 3s linear infinite;
        }

        @keyframes logo-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 50px rgba(255, 42, 109, 0.8); }
            50% { transform: scale(1.05); box-shadow: 0 0 70px rgba(255, 42, 109, 1); }
            100% { transform: scale(1); box-shadow: 0 0 50px rgba(255, 42, 109, 0.8); }
        }

        .splash-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.4rem;
            color: var(--neo-secondary);
            text-shadow: 0 0 15px rgba(0, 240, 255, 0.8);
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* === BOTONES NEO-GLASS === */
        .btn-neo {
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-family: 'Rajdhani', sans-serif;
            cursor: pointer;
            margin: 0.8rem 0;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-neo::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent
            );
            transition: left 0.5s;
        }

        .btn-neo:hover::before {
            left: 100%;
        }

        .btn-primary { 
            background: linear-gradient(135deg, var(--neo-primary), #D10047); 
            color: white; 
        }

        .btn-secondary { 
            background: linear-gradient(135deg, var(--neo-secondary), #00B8FF); 
            color: var(--neo-bg); 
        }

        .btn-accent { 
            background: linear-gradient(135deg, var(--neo-accent), #FF9A00); 
            color: var(--neo-bg); 
        }

        .btn-purple { 
            background: linear-gradient(135deg, var(--neo-purple), #3A00B8); 
            color: white; 
        }

        /* === EFECTO RIPPLE PARA BOTONES === */
        .btn-neo {
            position: relative;
            overflow: hidden;
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }

        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* === NAVEGACIÓN INFERIOR NEO === */
        .app-nav {
            display: flex;
            justify-content: space-around;
            background: rgba(10, 7, 10, 0.9);
            border-top: 1px solid var(--neo-primary);
            padding: 0.8rem 0;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--neo-text-secondary);
            text-decoration: none;
            font-size: 0.8rem;
            font-family: 'Rajdhani', sans-serif;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem;
        }

        .nav-item.active, .nav-item:hover {
            color: var(--neo-accent);
            transform: translateY(-2px);
        }

        .nav-item i { 
            font-size: 1.4rem; 
            margin-bottom: 0.3rem; 
            transition: all 0.3s ease;
        }

        .nav-item.active i {
            text-shadow: 0 0 10px var(--neo-accent);
        }

        /* === BADGES Y NOTIFICACIONES === */
        .cart-badge, .alert-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--neo-primary);
            color: white;
            font-size: 0.7rem;
            padding: 0.2rem 0.4rem;
            border-radius: 50%;
            min-width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse-badge 2s infinite;
        }

        @keyframes pulse-badge {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* === SISTEMA DE NOTIFICACIONES INTELIGENTES === */
        .notification-container {
            position: fixed;
            top: 80px;
            right: 10px;
            z-index: 1000;
            max-width: 300px;
        }

        .notification {
            background: var(--neo-bg-light);
            border-left: 4px solid;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: slideInRight 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .notification::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.1), 
                transparent
            );
            animation: notification-shine 2s infinite;
        }

        @keyframes notification-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .notification.warning { border-color: var(--neo-accent); }
        .notification.danger { border-color: var(--neo-primary); }
        .notification.success { border-color: var(--neo-secondary); }
        .notification.info { border-color: var(--neo-purple); }

        .notification-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .notification-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .notification-time {
            font-size: 0.8rem;
            color: var(--neo-text-secondary);
        }

        .notification-body {
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .notification-actions {
            margin-top: 0.5rem;
            display: flex;
            gap: 0.5rem;
        }

        .notification-btn {
            padding: 0.3rem 0.8rem;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-resolve { background: var(--neo-secondary); color: var(--neo-bg); }
        .btn-escalate { background: var(--neo-primary); color: white; }
        .btn-ignore { background: transparent; color: var(--neo-text-secondary); border: 1px solid; }

        /* === SISTEMA DE GAMIFICACIÓN LABORAL === */
        .gamification-card {
            background: rgba(30, 10, 15, 0.6);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 42, 109, 0.3);
            position: relative;
            overflow: hidden;
        }

        .employee-rank {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .rank-badge {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            position: relative;
        }

        .rank-badge.novato { background: linear-gradient(135deg, #CD7F32, #8B4513); }
        .rank-badge.bronce { background: linear-gradient(135deg, #C0C0C0, #808080); }
        .rank-badge.plata { background: linear-gradient(135deg, #E5E4E2, #A8A8A8); }
        .rank-badge.oro { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .rank-badge.platino { background: linear-gradient(135deg, #00FFFA, #00B8FF); }
        .rank-badge.diamante { background: linear-gradient(135deg, #00FFFF, #0080FF); }

        .employee-info {
            flex: 1;
        }

        .employee-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            color: var(--neo-accent);
            margin-bottom: 0.3rem;
        }

        .employee-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
        }

        .stat-value {
            font-weight: 600;
            color: var(--neo-secondary);
        }

        .progress-container {
            margin-top: 0.8rem;
        }

        .progress-bar {
            background: rgba(0,0,0,0.3);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 0.3rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neo-primary), var(--neo-accent));
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--neo-text-secondary);
        }

        /* === LEADERBOARD EN TIEMPO REAL === */
        .leaderboard {
            background: rgba(20, 5, 10, 0.8);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid var(--neo-primary);
        }

        .leaderboard-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--neo-accent);
            text-align: center;
            margin-bottom: 1rem;
            text-shadow: 0 0 10px rgba(255, 211, 0, 0.5);
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .leaderboard-rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            margin-right: 1rem;
            font-size: 0.9rem;
        }

        .rank-1 { background: linear-gradient(135deg, #FFD700, #FFA500); color: var(--neo-bg); }
        .rank-2 { background: linear-gradient(135deg, #C0C0C0, #808080); color: var(--neo-bg); }
        .rank-3 { background: linear-gradient(135deg, #CD7F32, #8B4513); color: white; }
        .rank-other { background: rgba(255,255,255,0.1); color: var(--neo-text); }

        .leaderboard-info {
            flex: 1;
        }

        .leaderboard-name {
            font-weight: 600;
            color: var(--neo-text);
            margin-bottom: 0.2rem;
        }

        .leaderboard-score {
            font-size: 0.8rem;
            color: var(--neo-secondary);
        }

        .score-change {
            font-size: 0.8rem;
            font-weight: 600;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            margin-left: 0.5rem;
        }

        .score-positive { background: rgba(0, 255, 0, 0.2); color: #00FF00; }
        .score-negative { background: rgba(255, 0, 0, 0.2); color: #FF4444; }

        /* === LIVE ACTIVITY FEED === */
        .activity-feed {
            max-height: 200px;
            overflow-y: auto;
            margin: 1rem 0;
        }

        .activity-item {
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            font-size: 0.8rem;
            border-left: 3px solid;
            animation: fadeInUp 0.5s ease;
        }

        .activity-positive { border-color: var(--neo-secondary); }
        .activity-negative { border-color: var(--neo-primary); }
        .activity-neutral { border-color: var(--neo-text-secondary); }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* === MENÚ DIGITAL NEO === */
        .menu-category {
            margin-bottom: 2rem;
        }

        .menu-category-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--neo-primary);
            font-size: 1.3rem;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--neo-primary);
            text-shadow: 0 0 10px rgba(255, 42, 109, 0.5);
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .menu-card {
            background: rgba(25, 10, 15, 0.7);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(255, 42, 109, 0.3);
            transition: all 0.3s ease;
            position: relative;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: linear-gradient(125deg, 
                rgba(255, 42, 109, 0.1) 0%,
                rgba(0, 240, 255, 0.1) 50%,
                rgba(110, 0, 255, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 42, 109, 0.3);
        }

        .menu-card:hover::before {
            opacity: 1;
        }

        .menu-card-img {
            height: 140px;
            overflow: hidden;
            position: relative;
        }

        .menu-card-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .menu-card:hover .menu-card-img img {
            transform: scale(1.1);
        }

        .menu-card-body {
            padding: 1rem;
            position: relative;
            z-index: 1;
        }

        .menu-card-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            color: var(--neo-accent);
            margin: 0 0 0.5rem;
            text-shadow: 0 0 10px rgba(255, 211, 0, 0.3);
        }

        .menu-card-desc {
            font-size: 0.9rem;
            color: var(--neo-text-secondary);
            margin: 0 0 1rem;
            line-height: 1.4;
        }

        .menu-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .menu-card-price {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: var(--neo-primary);
            font-size: 1.1rem;
        }

        .menu-card-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--neo-primary), #D10047);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 42, 109, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-card-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 42, 109, 0.6);
        }

        /* === RESPONSIVE DESIGN === */
        @media (max-width: 480px) {
            .app-container {
                border: none;
                box-shadow: none;
            }
            
            .app-header h1 {
                font-size: 1.3rem;
            }
            
            .btn-neo {
                padding: 0.8rem;
            }
        }

        /* === SCROLLBAR PERSONALIZADO === */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--neo-primary), var(--neo-secondary));
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--neo-secondary), var(--neo-primary));
        }
    </style>
</head>
<body>
    <!-- Splash Screen Neo -->
    <div id="splashScreen">
        <div class="splash-logo">
            <i class="fas fa-utensils"></i>
        </div>
        <div class="splash-text">GASTRONEO QUANTUM</div>
        <div style="margin-top: 1rem; font-family: 'Rajdhani'; color: var(--neo-text-secondary);">
            Cargando revolución gastronómica...
        </div>
    </div>

    <!-- Sistema de Notificaciones -->
    <div class="notification-container" id="notificationContainer"></div>

    <div class="app-container">
        <!-- Home View -->
        <div id="homeView" class="view active">
            <div class="app-header">
                <h1>GASTRONEO QUANTUM</h1>
            </div>
            <div class="app-content">
                <!-- Sección Usuario -->
                <div id="authOrProfile"></div>

                <!-- Botones Principales -->
                <button class="btn-neo btn-primary" onclick="showView('bookingView')">
                    <i class="fas fa-calendar-plus"></i> Reservar Mesa
                </button>
                <button class="btn-neo btn-secondary" onclick="showView('qrScannerView')">
                    <i class="fas fa-qrcode"></i> Escanear Mesa
                </button>
                <button class="btn-neo btn-accent" onclick="showView('menuView')">
                    <i class="fas fa-book-open"></i> Menú Digital
                </button>
                <button class="btn-neo btn-purple" onclick="showView('rewardsView')">
                    <i class="fas fa-coins"></i> Mi GastroPass
                </button>

                <!-- Acceso Empleados -->
                <div style="margin: 1.5rem 0; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 12px;">
                    <div style="font-family: 'Orbitron'; color: var(--neo-secondary); margin-bottom: 0.8rem; text-align: center;">
                        ACCESO EMPLEADOS
                    </div>
                    <button class="btn-neo" style="background: rgba(0,240,255,0.2); color: var(--neo-secondary); border: 1px solid var(--neo-secondary);" 
                            onclick="showView('employeeLoginView')">
                        <i class="fas fa-user-tie"></i> Panel Empleados
                    </button>
                    <button class="btn-neo" style="background: rgba(255,42,109,0.2); color: var(--neo-primary); border: 1px solid var(--neo-primary);" 
                            onclick="openOwnerAccess()">
                        <i class="fas fa-user-lock"></i> Panel Quantum
                    </button>
                </div>

                <!-- Live Activity Feed -->
                <div class="neo-glass" style="padding: 1rem; margin-top: 1rem;">
                    <div style="font-family: 'Orbitron'; color: var(--neo-accent); margin-bottom: 0.8rem; text-align: center;">
                        ⚡ ACTIVIDAD EN VIVO
                    </div>
                    <div class="activity-feed" id="liveActivityFeed">
                        <!-- Las actividades se cargan dinámicamente -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Vistas del Sistema (seguirían las demás vistas) -->
        <!-- Solo muestro la estructura básica por brevedad -->
        
    </div>

    <!-- Navegación Inferior -->
    <div class="app-nav">
        <a href="#" class="nav-item active" onclick="showView('homeView'); return false;">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('bookingView'); return false;">
            <i class="fas fa-calendar"></i>
            <span>Reservas</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('menuView'); return false;">
            <i class="fas fa-book"></i>
            <span>Menú</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('qrScannerView'); return false;">
            <i class="fas fa-qrcode"></i>
            <span>Escanear</span>
        </a>
        <a href="#" class="nav-item" onclick="showView('cartView'); return false;" id="cartNavItem">
            <i class="fas fa-shopping-cart"></i>
            <span>Carrito</span>
            <div class="cart-badge" id="cartBadge" style="display: none;">0</div>
        </a>
    </div>

    <script>
        // === ESTADO GLOBAL DEL SISTEMA ===
        let appState = {
            user: null,
            employee: null,
            cart: JSON.parse(localStorage.getItem('gastroneo_cart')) || [],
            notifications: JSON.parse(localStorage.getItem('gastroneo_notifications')) || [],
            employees: JSON.parse(localStorage.getItem('gastroneo_employees')) || [],
            activities: JSON.parse(localStorage.getItem('gastroneo_activities')) || []
        };

        // === INICIALIZACIÓN ===
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Simular carga de recursos
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                
                // Inicializar sistemas
                initializeUserSystem();
                initializeEmployeeSystem();
                initializeNotificationSystem();
                initializeGamificationSystem();
                updateCartBadge();
                
                // Iniciar simulaciones en vivo
                startLiveSimulations();
                
            }, 3000);
        }

        // === SISTEMA DE NOTIFICACIONES INTELIGENTES ===
        function initializeNotificationSystem() {
            // Cargar notificaciones existentes
            renderNotifications();
            
            // Simular nuevas notificaciones cada 30 segundos
            setInterval(simulateNewNotification, 30000);
        }

        function createNotification(type, title, message, actions = []) {
            const notification = {
                id: 'notif_' + Date.now(),
                type: type,
                title: title,
                message: message,
                timestamp: new Date().toISOString(),
                read: false,
                actions: actions
            };
            
            appState.notifications.unshift(notification);
            localStorage.setItem('gastroneo_notifications', JSON.stringify(appState.notifications));
            
            renderNotification(notification);
            playNotificationSound(type);
        }

        function renderNotifications() {
            const container = document.getElementById('notificationContainer');
            container.innerHTML = '';
            
            // Mostrar últimas 3 notificaciones no leídas
            const unreadNotifications = appState.notifications.filter(n => !n.read).slice(0, 3);
            
            unreadNotifications.forEach(notification => {
                renderNotification(notification);
            });
        }

        function renderNotification(notification) {
            const container = document.getElementById('notificationContainer');
            const notificationEl = document.createElement('div');
            notificationEl.className = `notification ${notification.type}`;
            notificationEl.innerHTML = `
                <div class="notification-header">
                    <div class="notification-title">${notification.title}</div>
                    <div class="notification-time">${formatTime(notification.timestamp)}</div>
                </div>
                <div class="notification-body">${notification.message}</div>
                ${notification.actions.length > 0 ? `
                    <div class="notification-actions">
                        ${notification.actions.map(action => `
                            <button class="notification-btn btn-${action.type}" onclick="${action.handler}">
                                ${action.label}
                            </button>
                        `).join('')}
                    </div>
                ` : ''}
            `;
            
            container.appendChild(notificationEl);
            
            // Auto-remover después de 10 segundos
            setTimeout(() => {
                if (notificationEl.parentNode) {
                    notificationEl.remove();
                }
            }, 10000);
        }

        function playNotificationSound(type) {
            // En una implementación real, aquí cargarías archivos de audio
            console.log(`🔊 Reproduciendo sonido para notificación ${type}`);
        }

        // === SISTEMA DE GAMIFICACIÓN LABORAL ===
        function initializeGamificationSystem() {
            // Inicializar empleados de ejemplo si no existen
            if (appState.employees.length === 0) {
                appState.employees = [
                    {
                        id: 'emp_1',
                        name: 'Carlos Rodríguez',
                        role: 'Mesero',
                        points: 850,
                        level: 'diamante',
                        performance: 95,
                        todayPoints: 45,
                        avatar: '👨‍💼'
                    },
                    {
                        id: 'emp_2', 
                        name: 'Ana Martínez',
                        role: 'Mesera',
                        points: 720,
                        level: 'oro',
                        performance: 88,
                        todayPoints: 32,
                        avatar: '👩‍💼'
                    },
                    {
                        id: 'emp_3',
                        name: 'Luis García',
                        role: 'Mesero',
                        points: 450,
                        level: 'plata',
                        performance: 76,
                        todayPoints: -12,
                        avatar: '👨‍💼'
                    }
                ];
                localStorage.setItem('gastroneo_employees', JSON.stringify(appState.employees));
            }
            
            renderLeaderboard();
            startLiveActivities();
        }

        function updateEmployeePoints(employeeId, points, reason) {
            const employee = appState.employees.find(emp => emp.id === employeeId);
            if (employee) {
                employee.points += points;
                employee.todayPoints += points;
                
                // Actualizar nivel
                updateEmployeeLevel(employee);
                
                // Guardar cambios
                localStorage.setItem('gastroneo_employees', JSON.stringify(appState.employees));
                
                // Agregar actividad
                addActivity(
                    points > 0 ? 'positive' : 'negative',
                    `${employee.name} ${points > 0 ? '+' : ''}${points} puntos: ${reason}`
                );
                
                // Renderizar cambios
                renderLeaderboard();
                
                return true;
            }
            return false;
        }

        function updateEmployeeLevel(employee) {
            const levels = {
                novato: { min: 0, max: 100 },
                bronce: { min: 101, max: 300 },
                plata: { min: 301, max: 600 },
                oro: { min: 601, max: 1000 },
                platino: { min: 1001, max: 2000 },
                diamante: { min: 2001, max: Infinity }
            };
            
            for (const [level, range] of Object.entries(levels)) {
                if (employee.points >= range.min && employee.points <= range.max) {
                    employee.level = level;
                    break;
                }
            }
        }

        function renderLeaderboard() {
            const leaderboard = document.getElementById('leaderboard');
            if (!leaderboard) return;
            
            // Ordenar empleados por puntos
            const sortedEmployees = [...appState.employees].sort((a, b) => b.points - a.points);
            
            leaderboard.innerHTML = sortedEmployees.map((emp, index) => `
                <div class="leaderboard-item">
                    <div class="leaderboard-rank rank-${index + 1}">${index + 1}</div>
                    <div class="leaderboard-info">
                        <div class="leaderboard-name">${emp.name}</div>
                        <div class="leaderboard-score">
                            ${emp.points} pts • ${emp.level.toUpperCase()}
                            ${emp.todayPoints !== 0 ? `
                                <span class="score-change ${emp.todayPoints > 0 ? 'score-positive' : 'score-negative'}">
                                    ${emp.todayPoints > 0 ? '+' : ''}${emp.todayPoints}
                                </span>
                            ` : ''}
                        </div>
                    </div>
                    <div class="rank-badge ${emp.level}">${emp.avatar}</div>
                </div>
            `).join('');
        }

        // === SISTEMA DE ACTIVIDADES EN VIVO ===
        function startLiveActivities() {
            // Simular actividad cada 15 segundos
            setInterval(simulateLiveActivity, 15000);
            renderActivityFeed();
        }

        function addActivity(type, message) {
            const activity = {
                id: 'act_' + Date.now(),
                type: type,
                message: message,
                timestamp: new Date().toISOString()
            };
            
            appState.activities.unshift(activity);
            // Mantener solo las últimas 10 actividades
            appState.activities = appState.activities.slice(0, 10);
            localStorage.setItem('gastroneo_activities', JSON.stringify(appState.activities));
            
            renderActivityFeed();
        }

        function renderActivityFeed() {
            const feed = document.getElementById('liveActivityFeed');
            if (!feed) return;
            
            feed.innerHTML = appState.activities.map(activity => `
                <div class="activity-item activity-${activity.type}">
                    <div>${activity.message}</div>
                    <div style="font-size: 0.7rem; color: var(--neo-text-secondary); margin-top: 0.2rem;">
                        ${formatTime(activity.timestamp)}
                    </div>
                </div>
            `).join('');
        }

        // === SIMULACIONES EN VIVO (PARA DEMO) ===
        function startLiveSimulations() {
            // Simular notificaciones automáticas
            setTimeout(() => {
                simulateNewNotification();
            }, 5000);
            
            // Simular actividades automáticas
            setTimeout(() => {
                simulateLiveActivity();
            }, 8000);
        }

        function simulateNewNotification() {
            const notifications = [
                {
                    type: 'warning',
                    title: '⏰ ALERTA TIEMPO',
                    message: 'Mesa 8 - 15min esperando pedido\nResponsable: Carlos\nUbicación: Terraza derecha',
                    actions: [
                        { type: 'resolve', label: 'Resolver', handler: "resolveNotification('notif_1')" },
                        { type: 'escalate', label: 'Escalar', handler: "escalateNotification('notif_1')" }
                    ]
                },
                {
                    type: 'success', 
                    title: '⭐ CLIENTE FELIZ',
                    message: 'Ana Martínez recibió elogios de Mesa 3\n+15 puntos automáticos',
                    actions: [
                        { type: 'resolve', label: 'OK', handler: "resolveNotification('notif_2')" }
                    ]
                },
                {
                    type: 'danger',
                    title: '🚨 ATENCIÓN URGENTE',
                    message: 'Mesa 12 - 2do pedido incorrecto\nLuis García -25 puntos',
                    actions: [
                        { type: 'escalate', label: 'Supervisor', handler: "escalateNotification('notif_3')" },
                        { type: 'ignore', label: 'Ignorar', handler: "ignoreNotification('notif_3')" }
                    ]
                }
            ];
            
            const randomNotif = notifications[Math.floor(Math.random() * notifications.length)];
            createNotification(randomNotif.type, randomNotif.title, randomNotif.message, randomNotif.actions);
        }

        function simulateLiveActivity() {
            const activities = [
                { type: 'positive', message: 'Carlos +10pts: Cliente elogió servicio rápido' },
                { type: 'positive', message: 'Ana +8pts: Upselling exitoso en Mesa 5' },
                { type: 'negative', message: 'Luis -12pts: Tiempo excedido en pedido' },
                { type: 'positive', message: 'Sistema: 3 nuevas reservas esta hora' },
                { type: 'neutral', message: 'Inventario: Stock bajo en ingrediente X' }
            ];
            
            const randomActivity = activities[Math.floor(Math.random() * activities.length)];
            addActivity(randomActivity.type, randomActivity.message);
        }

        // === FUNCIONES AUXILIARES ===
        function formatTime(timestamp) {
            return new Date(timestamp).toLocaleTimeString('es-ES', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }

        function showView(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            
            // Actualizar navegación
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            if (viewId === 'homeView') {
                document.querySelectorAll('.nav-item')[0].classList.add('active');
            } else if (viewId === 'bookingView') {
                document.querySelectorAll('.nav-item')[1].classList.add('active');
            } else if (viewId === 'menuView') {
                document.querySelectorAll('.nav-item')[2].classList.add('active');
            } else if (viewId === 'qrScannerView') {
                document.querySelectorAll('.nav-item')[3].classList.add('active');
            } else if (viewId === 'cartView') {
                document.querySelectorAll('.nav-item')[4].classList.add('active');
            }
        }

        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            const totalItems = appState.cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (totalItems > 0) {
                badge.textContent = totalItems;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        // === FUNCIONES DE EJEMPLO (se implementarían completamente) ===
        function initializeUserSystem() {
            // Sistema de autenticación de usuarios
            const user = JSON.parse(localStorage.getItem('gastroneo_user'));
            if (user) {
                appState.user = user;
                renderUserProfile();
            } else {
                renderAuthSection();
            }
        }

        function initializeEmployeeSystem() {
            // Sistema de empleados
            const employee = JSON.parse(localStorage.getItem('gastroneo_current_employee'));
            if (employee) {
                appState.employee = employee;
            }
        }

        function renderUserProfile() {
            const container = document.getElementById('authOrProfile');
            if (appState.user) {
                container.innerHTML = `
                    <div class="neo-glass" style="padding: 1rem; text-align: center; margin-bottom: 1rem;">
                        <div style="font-family: 'Orbitron'; color: var(--neo-accent); font-size: 1.2rem;">
                            Hola, ${appState.user.name} ✨
                        </div>
                        <div style="color: var(--neo-secondary); margin-top: 0.5rem;">
                            GastroTokens: ${appState.user.tokens || 0}
                        </div>
                    </div>
                `;
            }
        }

        function renderAuthSection() {
            const container = document.getElementById('authOrProfile');
            container.innerHTML = `
                <div class="neo-holographic" style="padding: 1.5rem; text-align: center; margin-bottom: 1.5rem; border-radius: 16px;">
                    <div style="font-family: 'Orbitron'; color: var(--neo-accent); font-size: 1.3rem; margin-bottom: 1rem;">
                        ¿NUEVO EN GASTRONEO?
                    </div>
                    <div style="color: var(--neo-text-secondary); margin-bottom: 1.5rem; line-height: 1.5;">
                        Crea tu GastroPass y accede a recompensas exclusivas del futuro.
                    </div>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button class="btn-neo btn-accent" onclick="showSignupModal()">
                            Crear Cuenta
                        </button>
                        <button class="btn-neo btn-primary" onclick="showLoginModal()">
                            Iniciar Sesión
                        </button>
                    </div>
                </div>
            `;
        }

        function openOwnerAccess() {
            const pin = prompt("🔐 PIN QUANTUM (demo: 1234):");
            if (pin === "1234") {
                showView('ownerDashboard');
            } else if (pin) {
                alert("⚠️ PIN incorrecto. Acceso denegado.");
            }
        }

        // === RIPPLE EFFECT ===
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('btn-neo') || e.target.closest('.btn-neo')) {
                const btn = e.target.classList.contains('btn-neo') ? e.target : e.target.closest('.btn-neo');
                const ripple = document.createElement('span');
                const rect = btn.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                ripple.classList.add('ripple');
                
                btn.appendChild(ripple);
                
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            }
        });

        // Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(err => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
